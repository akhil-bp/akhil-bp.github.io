{"version":3,"sources":["assets/img/mteams-logo.svg.svg","components/auth/chooseAuth.js","components/auth/auth.js"],"names":["module","exports","mykademyCommonService","require","myportfolioCommonService","ChooseAuth","props","checkAnyOneLoggedIn","userData","user","console","log","name","user_data","us_name","organization","image","us_image","setState","is_mykademy_logged_in","mykademy_user","mykademy_no_user_signed_in","data","member_details","first_name","organisation_details","image_url","is_myportfolio_logged_in","myportfolio_user","myportfolio_no_user_signed_in","state","updateStateFromChild","val","letsGoLogic","choose_mykademy","choose_myportfolio","localStorage","getItem","removeItem","this","microsoftTeams","notifySuccess","success","class","id","tabindex","aria-labelledby","aria-modal","role","style","display","height","src","alt","onClick","href","data-tab","single_auth","closeModal","className","disabled","Component","mykademyApis","myportfolioApis","commonApiService","sign","Auth","errors","isInvalidCredentials","sent_data","formValied","btnLoading","show_login","choose_login_type","loader","inputhandle","field","e","target","value","validateFields","showErrMessage","fields","formIsValid","match","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","loginSubmit","a","preventDefault","isValid","mykademyLoggedin","myportfolioLoggedin","myPrortfolio_Login","mykademyLogin","setTimeout","Notification","check_vle_db","domain","subdomain","getOrg","then","response","status","subdomainValidation","error","catch","err","yourDate","moment","Date","newDate","format","secret","config","mykademy","REACT_APP_MYKADEMY_SUBDOMAIN_VALIDATION_SECRET","signature","APP_TOKEN_CREATE","app_name","account_domain","date","jwt","headers","Authorization","domainValidation","setItem","app_signature","generateToken","generatePortfolioStaticToken","email","password","learner_email","btoa","learner_password","Promise","resolve","reject","portfolio_authtoken","JSON","parse","formData","FormData","toLowerCase","append","authenticateUser","stringify","condition","message","notifyFailure","encodeBase64","appToken","Fragment","onSubmit","for","autoFocus","type","placeholder","onChange","bind","backgroundColor","width","onLoad","updateDomain","onKeyDown","key","data-bs-dismiss","color","React"],"mappings":"qHAAAA,EAAOC,QAAU,IAA0B,6C,yMCKrCC,EAAwBC,EAAQ,IAChCC,EAA2BD,EAAQ,IAyL1BE,E,kDArLX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAmBVC,oBAAsB,WAClB,GAAyC,OAArCL,EAAsBM,WAAqB,CAC3C,IAAIC,EAAOP,EAAsBM,WACjCE,QAAQC,IAAIF,GACZ,IAAID,EAAW,GACfA,EAASI,KAAOH,EAAKI,UAAUC,QAC/BN,EAASO,aAAe,sBACxBP,EAASQ,MAAQP,EAAKI,UAAUI,SAChC,EAAKC,SAAS,CAAEC,uBAAuB,EAAMC,cAAeZ,EAAUa,4BAA6B,IAEvG,GAA4C,OAAxCjB,EAAyBI,WAAqB,CAAC,IAAD,UAC1CC,EAAOL,EAAyBI,WACpCE,QAAQC,IAAIF,GACZ,IAAID,EAAW,GACfA,EAASI,KAAT,OAAgBH,QAAhB,IAAgBA,GAAhB,UAAgBA,EAAMa,YAAtB,iBAAgB,EAAYC,sBAA5B,aAAgB,EAA4BC,WAC5ChB,EAASO,aAAT,OAAwBN,QAAxB,IAAwBA,GAAxB,UAAwBA,EAAMa,YAA9B,iBAAwB,EAAYC,sBAApC,iBAAwB,EAA4BE,4BAApD,aAAwB,EAAkDb,KAC1EJ,EAASQ,MAAQP,EAAKa,KAAKC,eAAeG,UAC1C,EAAKR,SAAS,CAAES,0BAA0B,EAAMC,iBAAkBpB,EAASqB,+BAAgC,IAE/GnB,QAAQC,IAAI,EAAKmB,MAAMV,eACvBV,QAAQC,IAAI,EAAKmB,MAAMF,mBAxCR,EA2CnBG,qBAAuB,SAACC,GACpB,EAAKzB,sBACL,EAAKW,SAASc,IA7CC,EAgEnBC,YAAc,WACV,SAAK,EAAKH,MAAMX,wBAAyB,EAAKW,MAAMT,6BAAgC,EAAKS,MAAMH,2BAA4B,EAAKG,MAAMD,oCAC9H,EAAKC,MAAMX,wBAAyB,EAAKW,MAAMH,6BAGL,IAA1C,EAAKG,MAAMT,6BAAqF,IAA7C,EAAKS,MAAMD,kCAGf,IAA1C,EAAKC,MAAMT,6BAAoF,IAA7C,EAAKS,MAAMD,iCAGjB,IAA1C,EAAKC,MAAMT,6BAAqF,IAA7C,EAAKS,MAAMD,oCAAlE,MAzEX,EAAKC,MAAQ,CACTV,cAAe,GACfQ,iBAAkB,GAClBM,iBAAiB,EACjBC,oBAAoB,EACpBhB,uBAAuB,EACvBQ,0BAA0B,EAC1BN,4BAA4B,EAC5BQ,+BAA+B,GAVpB,E,qDAanB,WAC4C,OAArCO,aAAaC,QAAQ,aACpBD,aAAaE,WAAW,YAE5BC,KAAKhC,wB,wBA+BT,WAEIiC,eACAA,iBAA8BC,cAAc,CAAEC,SAAS,M,oBA+B3D,WAAU,IAAD,SACuCH,KAAKT,MAAzCV,EADH,EACGA,cAAeQ,EADlB,EACkBA,iBACvB,OAAKW,KAAKT,MAAMI,iBAAoBK,KAAKT,MAAMK,mBAoF3CI,KAAKT,MAAMI,gBAEP,kBAAC,IAAD,CAAcH,qBAAsBQ,KAAKR,uBAG7CQ,KAAKT,MAAMK,mBAEP,kBAAC,IAAD,CAAeJ,qBAAsBQ,KAAKR,4BAFlD,EAvFQ,yBAAKY,MAAM,qCAAqCC,GAAG,WAAWC,SAAS,KAAKC,kBAAgB,oBAAoBC,aAAW,OAAOC,KAAK,SAASC,MAAO,CAAEC,QAAS,UAC9J,yBAAKP,MAAM,IACP,yBAAKA,MAAM,gBAAgBM,MAAO,CAAEE,OAAQ,UACxC,yBAAKR,MAAM,cACP,8BACI,yBAAKC,GAAG,aAAaD,MAAM,eACvB,8DACA,uBAAGA,MAAM,SAAT,iDACA,yBAAKA,MAAM,sBACP,yBAAKA,MAAM,qBAAqBS,KAAkB,OAAbhC,QAAa,IAAbA,OAAA,EAAAA,EAAeJ,OAAQI,EAAcJ,MAAQ,2CAA4CqC,IAAI,cACjId,KAAKT,MAAMX,sBAER,yBAAKwB,MAAM,gBACP,wCAAa,yBAAKS,IAAI,sCAAsCC,IAAI,aAChE,0BAAMV,MAAM,gBAAZ,uBAAyCvB,QAAzC,IAAyCA,OAAzC,EAAyCA,EAAeR,MACxD,0BAAM+B,MAAM,gBAAZ,OAA4BvB,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAeL,eAG/C,yBAAK4B,MAAM,gBACP,uCACCJ,KAAKT,MAAMT,4BACJ,yBAAK+B,IAAI,uCAAuCC,IAAI,mBAG3Dd,KAAKT,MAAMT,4BACR,0BAAMsB,MAAM,gBAAZ,wBAEJ,uBAAGW,QAAS,kBAAM,EAAKpC,SAAS,CAAEgB,iBAAiB,KAASqB,KAAK,sBAAsBC,WAAS,mBAAhG,YACEjB,KAAKT,MAAMT,4BACT,uBAAGiC,QAAS,kBAAM,EAAKpC,SAAS,CAAEG,4BAA4B,KAASkC,KAAK,uBAA5E,0CAKhB,yBAAKZ,MAAM,sBACP,yBAAKA,MAAM,qBAAqBS,KAAqB,OAAhBxB,QAAgB,IAAhBA,OAAA,EAAAA,EAAkBZ,OAAQY,EAAiBZ,MAAQ,8CAA+CqC,IAAI,iBAE1Id,KAAKT,MAAMH,yBAER,yBAAKgB,MAAM,gBACP,2CAAgB,yBAAKS,IAAI,sCAAsCC,IAAI,aACnE,0BAAMV,MAAM,gBAAZ,uBAAyCf,QAAzC,IAAyCA,OAAzC,EAAyCA,EAAkBhB,MAC3D,0BAAM+B,MAAM,gBAAZ,OAA4Bf,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAkBb,eAGlD,yBAAK4B,MAAM,gBACP,0CACCJ,KAAKT,MAAMD,+BACJ,yBAAKuB,IAAI,uCAAuCC,IAAI,mBAG3Dd,KAAKT,MAAMD,+BACR,0BAAMc,MAAM,gBAAZ,wBAEJ,uBAAGW,QAAS,kBAAM,EAAKpC,SAAS,CAAEiB,oBAAoB,KAASoB,KAAK,sBAAsBC,WAAS,sBAAnG,YACEjB,KAAKT,MAAMD,+BACT,uBAAGyB,QAAS,kBAAM,EAAKpC,SAAS,CAAEW,+BAA+B,KAAS0B,KAAK,uBAA/E,6CAKhB,yBAAKZ,MAAM,aACP,2EAAgD,uBAAGY,KAAK,uBAAR,WAEpD,yBAAKZ,MAAM,YACP,uBAAGW,QAAS,kBAAM,EAAKhD,MAAMyB,qBAAqB,CAAE0B,aAAa,KAAUF,KAAK,sBAAsBZ,MAAM,oBAAoBa,WAAS,gBAAzI,QACCjB,KAAKN,cAEF,uBAAGqB,QAAS,kBAAM,EAAKI,cAAcC,UAAU,mBAA/C,kBAEA,4BAAQC,UAAQ,EAACD,UAAU,mBAA3B,6B,GA9JvBE,a,iBCEnBC,GADQ3D,EAAQ,KACDA,EAAQ,KACvB4D,EAAkB5D,EAAQ,IAE1B6D,GADqB7D,EAAQ,IACVA,EAAQ,KAC3B8D,EAAO9D,EAAQ,KAEA+D,E,4MACnBpC,MAAQ,CACNrB,KAAM,GACN0D,OAAQ,GACRC,sBAAsB,EACtBC,UAAW,GACXC,WAAY,QACZC,YAAY,EACZC,YAAY,EACZC,mBAAmB,EACnBhB,aAAa,EACbiB,QAAQ,G,EAWVC,YAAc,SAACC,EAAOC,GACJ,EAAK/C,MAAMrB,KACjBmE,GAASC,EAAEC,OAAOC,OACO,IAA/B,EAAKC,gBAAe,GACtB,EAAK9D,SAAS,CAAEoD,WAAY,UACvB,EAAKpD,SAAS,CAAEoD,WAAY,OAAQF,sBAAsB,K,EAGnEY,eAAiB,SAACC,GAChB,IAAIC,EAAS,EAAKpD,MAAMrB,KACpB0D,EAAS,GACTgB,GAAc,EAclB,GAZKD,EAAM,UAGCA,EAAM,SAAaE,MAAM,WAFnCD,GAAc,EACdhB,EAAM,SAAe,4BAMlBe,EAAM,QACTC,GAAc,EACdhB,EAAM,MAAY,yBAEW,qBAApBe,EAAM,MAA2B,CAC1C,IAAIG,EAAYH,EAAM,MAAUI,YAAY,KACxCC,EAAaL,EAAM,MAAUI,YAAY,KAGzCD,EAAYE,GACZF,EAAY,IACuB,IAAnCH,EAAM,MAAUM,QAAQ,OACxBD,EAAa,GACbL,EAAM,MAAUO,OAASF,EAAa,IAGxCJ,GAAc,EACdhB,EAAM,MAAY,uBAMtB,OAHIc,GACF,EAAK/D,SAAS,CAAEiD,OAAQA,IAEnBgB,G,EA0ETO,Y,uCAAc,WAAOb,GAAP,mBAAAc,EAAA,yDACZd,EAAEe,iBACFlF,QAAQC,IAAI,uBACNkF,EAAU,EAAKb,gBAAe,GAChCc,GAAmB,EACnBC,GAAsB,GACtBF,EANQ,wBAOV,EAAK3E,SAAS,CAAEqD,YAAY,IAPlB,SAQe,EAAKyB,qBARpB,cAQVF,EARU,iBASkB,EAAKG,cAAc,EAAKnE,MAAMrB,MAThD,QASVsF,EATU,OAUVrF,QAAQC,IAAImF,EAAkBC,EAAqB,UAC/CD,GAAoBC,GACtB,EAAK7E,SAAS,CAAEqD,YAAY,IAE5B/B,eACAA,iBAA8BC,cAAc,CAAEC,SAAS,KAC/CoD,GACR,EAAK5E,SAAS,CAAEqD,YAAY,EAAMH,sBAAqB,IAEvD8B,YAAW,WAET1D,eACAA,iBAA8BC,cAAc,CAAEC,SAAS,MACvD,KACFyD,uBAAa,0BAA2B,OAAQ,SAGzCJ,GACP,EAAK7E,SAAS,CAAEqD,YAAY,EAAOH,sBAAqB,IACxD8B,YAAW,WAET1D,eACAA,iBAA8BC,cAAc,CAAEC,SAAS,MACvD,KACFyD,uBAAa,4BAA6B,OAAQ,SAGlD,EAAKjF,SAAS,CAAEkD,sBAAsB,IArC9B,wBAyCV,EAAKlD,SAAS,CAAEkD,sBAAsB,IAzC5B,4C,wDAkGdgC,a,uCAAe,WAAOvB,GAAP,eAAAc,EAAA,6DACbd,EAAEe,iBACF,EAAK1E,SAAS,CACZwD,QAAQ,EAAMN,sBAAsB,IAElC9C,EAAO,CACT+E,OAAO,EAAKvE,MAAMrB,KAAK6F,WANZ,SAQPtC,EAAiBuC,OAAOjF,GAC7BkF,MAAK,SAACC,GAEL,GADA/F,QAAQC,IAAI8F,GACgB,YAAzBA,EAASnF,KAAKoF,OACf,EAAKC,oBAAoB9B,OACtB,CACH,IAAI+B,EAAQ,EAAK9E,MAAMqC,OACvByC,EAAK,UAAgB,+FACrB,EAAK1F,SAAS,CAAEiD,OAAQyC,EAAOlC,QAAQ,IAGzChE,QAAQC,IAAI8F,EAAS,2BAEtBI,OAAM,SAACC,GACN,IAAIF,EAAQ,EAAK9E,MAAMqC,OACrByC,EAAK,UAAgB,+FACrB,EAAK1F,SAAS,CAAEiD,OAAQyC,EAAOlC,QAAQ,IAEzChE,QAAQC,IAAImG,MA1BD,2C,wDA8BfH,oB,uCAAsB,WAAO9B,GAAP,yBAAAc,EAAA,6DACpBd,EAAEe,iBACF,EAAK1E,SAAS,CACZwD,QAAQ,EAAMN,sBAAsB,IAEtC1D,QAAQC,IAAI,EAAKmB,MAAMrB,KAAK6F,UAAW,kBACjCS,EAAWC,EAAO,IAAIC,MACtBC,EAAUH,EAASI,OAAO,cAC1BC,EAASC,SAAOC,SAASC,+CACzBjG,EAAO,CACXkG,UACE,gCAAkCH,SAAOC,SAASG,iBACpDC,SAAU,kBACVC,eAAe,GAAD,OAAK,EAAK7F,MAAMrB,KAAK6F,UAArB,iBACdsB,KAAMV,GAEFW,EAAM5D,EAAK3C,EAAM8F,GACjBU,EAAU,CACdC,cAAc,gCAAD,OAAkCF,IAlB7B,UAoBd/D,EACHkE,iBAAiBF,GACjBtB,MAAK,SAACC,GACwB,MAAzBA,EAASnF,KAAKoF,SAChBtE,aAAa6F,QACX,WACD,YAED7F,aAAa6F,QACX,qBACAxB,EAASnF,KAAKA,KAAK4G,gBAGvB,EAAKhH,SAAS,CAAEsD,YAAY,EAAME,QAAQ,OAE3CmC,OAAM,SAACC,GACNpG,QAAQC,IAAImG,GACZ,IAAIF,EAAQ,EAAK9E,MAAMqC,OACvByC,EAAK,UAAgB,8EACrB,EAAK1F,SAAS,CAAEiD,OAAQyC,EAAOlC,QAAQ,OAvCvB,4C,wDA2CtB3C,qBAAuB,SAACC,GACtB,EAAKd,SAASc,I,uDA1ShB,WACEO,KAAK4F,kB,kEAGP,sBAAAxC,EAAA,sEACQ5B,EAAgBqE,+BADxB,2C,gFAmDA,YAA8C,IAA/BC,EAA8B,EAA9BA,MAAOC,EAAuB,EAAvBA,SAAuB,EAAbhC,UAC9B,MAAO,CAAEiC,cAAeC,KAAKH,GAAQI,iBAAkBD,KAAKF,M,uEAG9D,iCAAA3C,EAAA,+EACS,IAAI+C,QAAJ,uCAAY,WAAOC,EAASC,GAAhB,qBAAAjD,EAAA,6DACXmC,EAAU,CACd,eAAgB,uBAGU,QADxBe,EAAsBzG,aAAaC,QAAQ,0BAE7CyF,EAAO,cAAoB,UAAYgB,KAAKC,MAAMF,IAGhDG,EAAW,IAAIC,SACfZ,EAAQ,EAAKvG,MAAMrB,KAAK4H,MAAMa,cAClCF,EAASG,OAAO,WAAYd,GAC5BW,EAASG,OAAO,WAAY,EAAKrH,MAAMrB,KAAK6H,UAE5CU,EAASG,OAAO,aAAc,EAAKrH,MAAMrB,KAAK6F,WAE9C,EAAKpF,SAAS,CAAEqD,YAAY,IAhBX,UAiBXR,EACHqF,iBAAiBtB,EAASkB,GAC1BxC,MAAK,SAACC,GACmB,MAApBA,EAASC,OAEkB,UAAzBD,EAASnF,KAAKoF,QAChB,EAAKxF,SAAS,CAAEkD,sBAAsB,EAAMG,YAAY,IACxDnC,aAAaE,WAAW,iBACxBsG,GAAO,KAEPxG,aAAa6F,QAAQ,iBAAkBa,KAAKO,UAAU5C,IACtDkC,GAAQ,KAKVzC,YAAW,WACT,EAAKhF,SAAS,CAAEoI,UAAW,OAC1B,KACH,EAAKpI,SAAS,CACZoI,UACE,yBAAK3F,UAAU,yCACb,gCAAS8C,EAAS8C,YAIxBX,GAAO,OAGV/B,MA7BG,uCA6BG,WAAOD,GAAP,SAAAjB,EAAA,sDACLjF,QAAQC,IAAIiG,GACZ,EAAK1F,SAAS,CAAEkD,sBAAsB,EAAMG,YAAY,IAaxDqE,GAAO,GAfF,2CA7BH,uDAjBW,4CAAZ,0DADT,2C,8EAgHA,WACEpG,eACAA,iBAA8BgH,cAAc,CAAE9G,SAAS,M,kEAGzD,WAAoBjC,GAApB,oBAAAkF,EAAA,+EACS,IAAI+C,QAAJ,uCAAY,WAAOC,EAASC,GAAhB,iBAAAjD,EAAA,6DACbnF,EAAW,EAAKiJ,aAAahJ,GAC3BqH,EAAU,CACd,eAAgB,mBAChB,cAAiB4B,sBAJF,SAMX5F,EACHsF,iBAAiBtB,EAAStH,EAAUC,EAAK6F,WACzCE,MAAK,SAACC,GACwB,MAAzBA,EAASnF,KAAKoF,QAChBtE,aAAa6F,QAAQ,qBAAsBxH,EAAK6F,WAChDlE,aAAa6F,QACX,gBACAa,KAAKO,UAAU5C,EAASnF,KAAKA,OAE/BqH,GAAQ,IAIRA,GAAQ,MAKX9B,OAAM,SAACD,GACN,EAAK1F,SAAS,CAAEkD,sBAAsB,EAAMG,YAAY,IACxDoE,GAAQ,MA1BK,2CAAZ,0DADT,2C,iFAwCA,SAAa9D,GACX,IAAI7C,EAAMO,KAAKT,MAAMrB,KACrBuB,EAAIsE,UAAYzB,EAAEC,OAAOC,MACzB3C,aAAa6F,QAAQ,YAAajG,EAAIsE,WACtC,IAAInC,EAAS5B,KAAKT,MAAMqC,OACxBA,EAAM,UAAgB,KACtB5B,KAAKrB,SAAS,CAAET,KAAMuB,EAAK4E,MAAOzC,M,oBA+EpC,WAAU,IAAD,WACP,OAAI5B,KAAKT,MAAM2B,YAEX,kBAAC,EAAD,CAAY1B,qBAAsBQ,KAAKR,sBAAvC,KAIA,kBAAC,IAAM4H,SAAP,KAuDI,6BACIpH,KAAKT,MAAM0C,WAoET,yBAAK7B,MAAM,qCAAqCC,GAAG,WAAWC,SAAS,KAAKC,kBAAgB,oBAAoBC,aAAW,OAAOC,KAAK,SAASC,MAAO,CAAEC,QAAS,UAChK,yBAAKP,MAAM,IACT,yBAAKA,MAAM,gBAAgBM,MAAO,CAAEE,OAAQ,UAC1C,yBAAKR,MAAM,cACT,0BAAMiH,SAAUrH,KAAKmD,aACjBnD,KAAKT,MAAMyC,WAkDT,yBAAK5B,MAAM,sBACT,yBAAKA,MAAM,0EACT,yBAAKA,MAAM,iBAAiBK,KAAK,UAC/B,0BAAML,MAAM,mBAAZ,iBApDR,yBAAKA,MAAM,sBACT,yBAAKA,MAAM,qBAAqBS,IAAI,+CAA+CC,IAAI,uBACvF,4DACA,uBAAGV,MAAM,SAAT,wCACA,yBAAKA,MAAM,cACT,yBAAKA,MAAM,cACT,2BAAOkH,IAAI,IAAX,6BACA,2BACEC,WAAS,EACTC,KAAK,QACLpG,UAAWpB,KAAKT,MAAMsC,qBAAuB,2BAA6B,eAAgB4F,YAAY,yBACtGC,SAAU1H,KAAKoC,YAAYuF,KAAK3H,KAAM,YAG1C,yBAAKI,MAAM,cACT,2BAAOkH,IAAI,IAAX,YACA,2BACEE,KAAK,WACLpG,UAAWpB,KAAKT,MAAMsC,qBAAuB,2BAA6B,eAC1E4F,YAAY,gBACZC,SAAU1H,KAAKoC,YAAYuF,KAAK3H,KAAM,eAIxCA,KAAKT,MAAMsC,sBACX,yBAAKzB,MAAM,aAAX,4EAIJ,yBAAKA,MAAM,YACT,4BAAQW,QAAS,SAACuB,GAAD,OAAO,EAAK3D,SAAS,CAAEsD,YAAY,KAAUuF,KAAK,SAASpH,MAAM,kCAAlF,QACA,4BACEoH,KAAK,SACLpH,MAAM,2BACNiB,SAC4B,UAA1BrB,KAAKT,MAAMwC,YACX/B,KAAKT,MAAMwE,UAEbrD,MAAO,CACLkH,gBAC4B,SAA1B5H,KAAKT,MAAMwC,WACP,UACA,UACN8F,MAAO,SAZX,kBAxGlB,yBAAKC,OAAQjI,aAAaE,WAAW,UAAWK,MAAM,qCAAqCC,GAAG,WAAWC,SAAS,KAAKC,kBAAgB,oBAAoBC,aAAW,OAAOC,KAAK,SAASC,MAAO,CAAEC,QAAS,UAC3M,yBAAKP,MAAM,IACT,yBAAKA,MAAM,gBAAgBM,MAAO,CAAEE,OAAQ,UAC1C,yBAAKR,MAAM,cACT,0BAAMiH,SAAUrH,KAAK6D,cACjB7D,KAAKT,MAAM4C,OAgDT,yBAAK/B,MAAM,sBACT,yBAAKA,MAAM,0EACT,yBAAKA,MAAM,iBAAiBK,KAAK,UAC/B,0BAAML,MAAM,mBAAZ,iBAlDR,yBAAKgB,UAAU,sBACb,yBAAKhB,MAAM,qBAAqBS,IAAI,+CAA+CC,IAAI,uBACvF,4DACA,yEACA,yBAAKV,MAAM,cACT,2BACEmH,WAAS,EACTC,KAAK,OACLpG,UAAWpB,KAAKT,MAAMqC,OAAOmC,UAAY,2BAA6B,eACtE0D,YAAY,oBACZjF,MAAOxC,KAAKT,MAAMrB,KAAK6F,WAAa,GACpC2D,SAAU,SAACpF,GAAD,OAAO,EAAKyF,aAAazF,IACnC0F,UAAW,SAAC1F,GAAD,MACC,MAAVA,EAAE2F,IAAc3F,EAAEe,iBAAmB,MAIxCrD,KAAKT,MAAMqC,OAAOmC,WACjB,yBAAK3D,MAAM,aAAaJ,KAAKT,MAAMqC,OAAOmC,YAG9C,uFASA,yBAAK3D,MAAM,YACT,4BAAQoH,KAAK,SAASzG,QAAS,kBAAM,EAAKI,cAAcf,MAAM,oBAAoB8H,kBAAgB,SAAlG,UACA,4BACEV,KAAK,SACLpH,MAAM,2BACNiB,WAAU,UAACrB,KAAKT,MAAMrB,YAAZ,aAAC,EAAiB6F,WAC5BrD,MAAO,CACLkH,iBAAiB,UAAA5H,KAAKT,MAAMrB,YAAX,eAAiB6F,WAC9B,UACA,YAPR,aAYF,uBAAGhD,QAAS,kBAAM,EAAKpC,SAAS,CAAEuC,aAAa,KAASR,MAAO,CAACyH,MAAM,WAAY/H,MAAM,iBAAiBY,KAAK,uBAA9G,sC,GA7aIoH,IAAM9G","file":"static/js/5.993165f0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/mteams-logo.svg.36bd4a8e.svg\";","import React, { Component } from 'react';\nimport MykademyAuth from './auth.mykademy';\nimport PortfolioAuth from './auth.myportfolio';\nimport * as microsoftTeams from \"@microsoft/teams-js\";\n\nconst mykademyCommonService = require('../mykademy/services/common.service')\nconst myportfolioCommonService = require('../myportfolio/services/common.service')\n\nclass ChooseAuth extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            mykademy_user: {},\n            myportfolio_user: {},\n            choose_mykademy: false,\n            choose_myportfolio: false,\n            is_mykademy_logged_in: false,\n            is_myportfolio_logged_in: false,\n            mykademy_no_user_signed_in: false,\n            myportfolio_no_user_signed_in: false,\n        }\n    }\n    componentDidMount() {\n        if(localStorage.getItem('platfrom') !== null){\n            localStorage.removeItem('platfrom')\n        }\n        this.checkAnyOneLoggedIn()\n    }\n\n    checkAnyOneLoggedIn = () => {\n        if (mykademyCommonService.userData() !== null) {\n            let user = mykademyCommonService.userData()\n            console.log(user)\n            let userData = {}\n            userData.name = user.user_data.us_name\n            userData.organization = 'Mykademy Production'\n            userData.image = user.user_data.us_image\n            this.setState({ is_mykademy_logged_in: true, mykademy_user: userData ,mykademy_no_user_signed_in : false})\n        }\n        if (myportfolioCommonService.userData() !== null) {\n            let user = myportfolioCommonService.userData()\n            console.log(user)\n            let userData = {}\n            userData.name = user?.data?.member_details?.first_name\n            userData.organization = user?.data?.member_details?.organisation_details?.name\n            userData.image = user.data.member_details.image_url\n            this.setState({ is_myportfolio_logged_in: true, myportfolio_user: userData,myportfolio_no_user_signed_in : false })\n        }\n        console.log(this.state.mykademy_user)\n        console.log(this.state.myportfolio_user)\n    }\n\n    updateStateFromChild = (val) => {\n        this.checkAnyOneLoggedIn()\n        this.setState(val)\n    }\n\n    closeModal() {\n        // if (mykademyCommonService.userData() !== null || myportfolioCommonService.userData() !== null) {\n        microsoftTeams.initialize();\n        microsoftTeams.authentication.notifySuccess({ success: true });\n        // }\n        // else{\n        //     if (mykademyCommonService.userData() === null) {\n        //         // alert('mykademyCommonService')\n        //         this.setState({ mykademy_no_user_signed_in: true })\n        //     }\n        //     if (myportfolioCommonService.userData() === null) {\n        //         this.setState({ myportfolio_no_user_signed_in: true })\n        //         // alert('myportfolioCommonService')\n        //     }\n        // }\n    }\n    letsGoLogic = () => {\n        if ((this.state.is_mykademy_logged_in || this.state.mykademy_no_user_signed_in) && (this.state.is_myportfolio_logged_in || this.state.myportfolio_no_user_signed_in)) {\n            if (this.state.is_mykademy_logged_in && this.state.is_myportfolio_logged_in) {\n                return true\n            }\n            if (this.state.mykademy_no_user_signed_in === false && this.state.myportfolio_no_user_signed_in === false) {\n                return false\n            }\n            else if (this.state.mykademy_no_user_signed_in === true && this.state.myportfolio_no_user_signed_in === false) {\n                return true\n\n            } else if (this.state.mykademy_no_user_signed_in === false && this.state.myportfolio_no_user_signed_in === true) {\n                return true\n            }\n        } else {\n            return false\n        }\n    }\n    render() {\n        const { mykademy_user, myportfolio_user } = this.state\n        if (!this.state.choose_mykademy && !this.state.choose_myportfolio) {\n            return (\n                <div class=\"modal fade organization-modal show\" id=\"orgModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-modal=\"true\" role=\"dialog\" style={{ display: 'block' }}>\n                    <div class=\"\">\n                        <div class=\"modal-content\" style={{ height: '100vh' }}>\n                            <div class=\"modal-body\">\n                                <form >\n                                    <div id=\"multi-step\" class=\"step active\">\n                                        <h4>Sign in to your OLIVE accounts</h4>\n                                        <p class=\"mb-20\">Please sign into each of your accounts below.</p>\n                                        <div class=\"multi-account-wrap\">\n                                            <img class=\"olive-logo-rounded\" src={mykademy_user?.image ? mykademy_user.image : 'assets/images/landing/my-kademy-logo.png'} alt=\"my Kademy\" />\n                                            {this.state.is_mykademy_logged_in ?\n\n                                                <div class=\"account-info\">\n                                                    <h5>myKademy <img src=\"assets/images/landing/sign-tick.svg\" alt=\"sign in\" /></h5>\n                                                    <span class=\"sign-in-text\">Signed in as {mykademy_user?.name}</span>\n                                                    <span class=\"sign-in-text\">{mykademy_user?.organization}</span>\n                                                </div>\n                                                :\n                                                <div class=\"account-info\">\n                                                    <h5>myKademy\n                                                    {this.state.mykademy_no_user_signed_in &&\n                                                            <img src=\"assets/images/landing/error-icon.svg\" alt=\"sign in error\" />\n                                                        }\n                                                    </h5>\n                                                    {this.state.mykademy_no_user_signed_in &&\n                                                        <span class=\"sign-in-text\">No account signed in</span>\n                                                    }\n                                                    <a onClick={() => this.setState({ choose_mykademy: true })} href=\"javascript:void(0);\" data-tab=\"mykademy-step-1\">Sign in</a>\n                                                    {!this.state.mykademy_no_user_signed_in &&\n                                                        <a onClick={() => this.setState({ mykademy_no_user_signed_in: true })} href=\"javascript:void(0);\">I don’t have a myKademy account</a>\n                                                    }\n                                                </div>\n                                            }\n                                        </div>\n                                        <div class=\"multi-account-wrap\">\n                                            <img class=\"olive-logo-rounded\" src={myportfolio_user?.image ? myportfolio_user.image : 'assets/images/landing/my-portfolio-logo.png'} alt=\"my portfolio\" />\n\n                                            {this.state.is_myportfolio_logged_in ?\n\n                                                <div class=\"account-info\">\n                                                    <h5>myPortfolio <img src=\"assets/images/landing/sign-tick.svg\" alt=\"sign in\" /></h5>\n                                                    <span class=\"sign-in-text\">Signed in as {myportfolio_user?.name}</span>\n                                                    <span class=\"sign-in-text\">{myportfolio_user?.organization}</span>\n                                                </div>\n                                                :\n                                                <div class=\"account-info\">\n                                                    <h5>myPortfolio\n                                                    {this.state.myportfolio_no_user_signed_in &&\n                                                            <img src=\"assets/images/landing/error-icon.svg\" alt=\"sign in error\" />\n                                                        }\n                                                    </h5>\n                                                    {this.state.myportfolio_no_user_signed_in &&\n                                                        <span class=\"sign-in-text\">No account signed in</span>\n                                                    }\n                                                    <a onClick={() => this.setState({ choose_myportfolio: true })} href=\"javascript:void(0);\" data-tab=\"myportfolio-step-1\">Sign in</a>\n                                                    {!this.state.myportfolio_no_user_signed_in &&\n                                                        <a onClick={() => this.setState({ myportfolio_no_user_signed_in: true })} href=\"javascript:void(0);\">I don’t have a myPortfolio account</a>\n                                                    }\n                                                </div>\n                                            }\n                                        </div>\n                                        <div class=\"need-help\">\n                                            <p>Need help signing in? Visit our support page <a href=\"javascript:void(0);\">here.</a></p>\n                                        </div>\n                                        <div class=\"btn-wrap\">\n                                            <a onClick={() => this.props.updateStateFromChild({ single_auth: false })} href=\"javascript:void(0);\" class=\"btn btn-secondary\" data-tab=\"olive-step-1\">Back</a>\n                                            {this.letsGoLogic() ?\n\n                                                <a onClick={() => this.closeModal()} className=\"btn btn-primary\">Let’s go </a>\n                                                :\n                                                <button disabled className=\"btn btn-primary\">Let’s go </button>\n\n                                            }\n                                        </div>\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n        if (this.state.choose_mykademy) {\n            return (\n                <MykademyAuth updateStateFromChild={this.updateStateFromChild}></MykademyAuth>\n            )\n        }\n        if (this.state.choose_myportfolio) {\n            return (\n                <PortfolioAuth updateStateFromChild={this.updateStateFromChild}></PortfolioAuth>\n            )\n        }\n    }\n}\n\nexport default ChooseAuth;","import React from \"react\";\nimport * as microsoftTeams from \"@microsoft/teams-js\";\nimport * as moment from \"moment\";\nimport { config } from \"../../config\";\nimport { appToken } from '../mykademy/services/common.service'\nimport ChooseAuth from \"./chooseAuth\";\nimport img from '../../assets/img/mteams-logo.svg.svg'\nimport { Notification } from '../../services/common.service';\n\nconst axios = require(\"axios\");\nconst mykademyApis = require(\"../mykademy/services/api.service\");\nconst myportfolioApis = require(\"../myportfolio/services/api.service\");\nconst myportfolioService = require(\"../myportfolio/services/common.service\");\nconst commonApiService = require(\"../../services/common_api.service\")\nconst sign = require(\"jwt-encode\");\n\nexport default class Auth extends React.Component {\n  state = {\n    user: {},\n    errors: {},\n    isInvalidCredentials: false,\n    sent_data: {},\n    formValied: \"false\",\n    btnLoading: false,\n    show_login: false,\n    choose_login_type: true,\n    single_auth: false,\n    loader: false\n  };\n\n  componentDidMount() {\n    this.generateToken();\n  }\n\n  async generateToken() {\n    await myportfolioApis.generatePortfolioStaticToken()\n  }\n\n  inputhandle = (field, e) => {\n    let addValues = this.state.user;\n    addValues[field] = e.target.value;\n    if (this.validateFields(false) === false) {\n      this.setState({ formValied: \"false\" });\n    } else this.setState({ formValied: \"true\", isInvalidCredentials: false });\n  };\n\n  validateFields = (showErrMessage) => {\n    let fields = this.state.user;\n    let errors = {};\n    let formIsValid = true;\n    //password\n    if (!fields[\"password\"]) {\n      formIsValid = false;\n      errors[\"password\"] = \"Password cannot be empty\";\n    } else if (!fields[\"password\"].match(/^\\S*$/)) {\n      formIsValid = false;\n      errors[\"password\"] = \"Password cannot be empty\";\n    }\n    //email\n    if (!fields[\"email\"]) {\n      formIsValid = false;\n      errors[\"email\"] = \"Email cannot be empty\";\n    }\n    if (typeof fields[\"email\"] !== \"undefined\") {\n      let lastAtPos = fields[\"email\"].lastIndexOf(\"@\");\n      let lastDotPos = fields[\"email\"].lastIndexOf(\".\");\n      if (\n        !(\n          lastAtPos < lastDotPos &&\n          lastAtPos > 0 &&\n          fields[\"email\"].indexOf(\"@@\") === -1 &&\n          lastDotPos > 2 &&\n          fields[\"email\"].length - lastDotPos > 2\n        )\n      ) {\n        formIsValid = false;\n        errors[\"email\"] = \"Enter a valid Email\";\n      }\n    }\n    if (showErrMessage) {\n      this.setState({ errors: errors });\n    }\n    return formIsValid;\n  };\n\n  encodeBase64({ email, password, subdomain }) {\n    return { learner_email: btoa(email), learner_password: btoa(password) };\n  }\n\n  async myPrortfolio_Login() {\n    return new Promise(async (resolve, reject) => {\n      const headers = {\n        \"Content-Type\": \"multipart/form-data\",\n      };\n      let portfolio_authtoken = localStorage.getItem(\"portfolio_authtoken\");\n      if (portfolio_authtoken !== null) {\n        headers[\"Authorization\"] = \"Bearer \" + JSON.parse(portfolio_authtoken);\n      } else {\n      }\n      let formData = new FormData();\n      let email = this.state.user.email.toLowerCase()\n      formData.append(\"username\", email);\n      formData.append(\"password\", this.state.user.password);\n\n      formData.append(\"sub_domain\", this.state.user.subdomain);\n\n      this.setState({ btnLoading: true });\n      await myportfolioApis\n        .authenticateUser(headers, formData)\n        .then((response) => {\n          if (response.status === 200) {\n\n            if (response.data.status === \"error\") {\n              this.setState({ isInvalidCredentials: true, btnLoading: false });\n              localStorage.removeItem('mykademy_user')\n              reject(false)\n            } else {\n              localStorage.setItem(\"portfolio_user\", JSON.stringify(response));\n              resolve(true);\n            }\n            // this.setState({ btnLoading: false });\n          } else {\n            // this.setState({ btnLoading: false });\n            setTimeout(() => {\n              this.setState({ condition: \"\" });\n            }, 5000);\n            this.setState({\n              condition: (\n                <div className=\"alert alert-danger alert-dismissible \">\n                  <strong>{response.message}</strong>\n                </div>\n              ),\n            });\n            reject(false);\n          }\n        })\n        .catch(async (error) => {\n          console.log(error);\n          this.setState({ isInvalidCredentials: true, btnLoading: false });\n          // const mykademy_ = await this.mykademyLogin(this.state.user);\n          // this.setState({ btnLoading: false });\n          // setTimeout(() => {\n          //   this.setState({ condition: \"\" });\n          // }, 5000);\n          // this.setState({\n          //   condition: (\n          //     <div className=\"alert alert-danger alert-dismissible\">\n          //       <strong>{error.message}</strong>\n          //     </div>\n          //   ),\n          // });\n          reject(false);\n        });\n    });\n  }\n\n  loginSubmit = async (e) => {\n    e.preventDefault();\n    console.log('hereeeeeeeeeeeeeeee')\n    const isValid = this.validateFields(true);\n    let mykademyLoggedin = false\n    let myportfolioLoggedin = false\n    if (isValid) {\n      this.setState({ btnLoading: true });\n      mykademyLoggedin = await this.myPrortfolio_Login();\n      myportfolioLoggedin = await this.mykademyLogin(this.state.user);\n      console.log(mykademyLoggedin, myportfolioLoggedin, 'status')\n      if (mykademyLoggedin && myportfolioLoggedin) {\n        this.setState({ btnLoading: false });\n       \n        microsoftTeams.initialize();\n        microsoftTeams.authentication.notifySuccess({ success: true });\n      } else if(mykademyLoggedin) {\n        this.setState({ btnLoading: false,isInvalidCredentials:false });\n\n        setTimeout(()=>{\n\n          microsoftTeams.initialize();\n          microsoftTeams.authentication.notifySuccess({ success: true });\n        },3000)\n        Notification(\" Mykademy login failed!\", \"info\", \"Info\")\n\n        // this.setState({ isInvalidCredentials: true });\n      }else if(myportfolioLoggedin){\n        this.setState({ btnLoading: false ,isInvalidCredentials:false});\n        setTimeout(()=>{\n\n          microsoftTeams.initialize();\n          microsoftTeams.authentication.notifySuccess({ success: true });\n        },3000)\n        Notification(\"Myportfolio login failed!\", \"info\", \"Info\")\n\n      }else{\n        this.setState({ isInvalidCredentials: true });\n\n      }\n    } else {\n      this.setState({ isInvalidCredentials: true });\n    }\n  };\n\n  closeModal() {\n    microsoftTeams.initialize();\n    microsoftTeams.authentication.notifyFailure({ success: false });\n  }\n\n  async mykademyLogin(user) {\n    return new Promise(async (resolve, reject) => {\n      let userData = this.encodeBase64(user);\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": appToken(),\n      };\n      await mykademyApis\n        .authenticateUser(headers, userData, user.subdomain)\n        .then((response) => {\n          if (response.data.status === 200) {\n            localStorage.setItem(\"mykademy_subdomain\", user.subdomain);\n            localStorage.setItem(\n              \"mykademy_user\",\n              JSON.stringify(response.data.data)\n            );\n            resolve(true);\n            // microsoftTeams.initialize();\n            // microsoftTeams.authentication.notifySuccess({ success: true });\n          } else {\n            resolve(false);\n            // microsoftTeams.initialize();\n            // microsoftTeams.authentication.notifySuccess({ success: true });\n          }\n        })\n        .catch((error) => {\n          this.setState({ isInvalidCredentials: true, btnLoading: false });\n          resolve(false);\n          // if (myportfolioService.userData()) {\n          //   // microsoftTeams.initialize();\n          //   // microsoftTeams.authentication.notifySuccess({ success: true });\n          //   resolve(false);\n          // } else {\n          //   this.setState({ isInvalidCredentials: true, btnLoading: false, });\n          //   return;\n          // }\n        });\n    });\n  }\n\n  updateDomain(e) {\n    let val = this.state.user;\n    val.subdomain = e.target.value;\n    localStorage.setItem('subdomain', val.subdomain)\n    let errors = this.state.errors;\n    errors['subdomain'] = null\n    this.setState({ user: val, error: errors });\n  }\n  check_vle_db = async (e)=>{\n    e.preventDefault();\n    this.setState({\n      loader: true, isInvalidCredentials: false\n    })\n    let data = {\n      domain:this.state.user.subdomain\n    }\n    await commonApiService.getOrg(data)\n    .then((response)=>{\n      console.log(response)\n      if(response.data.status === \"success\"){\n        this.subdomainValidation(e)\n      }else{\n        let error = this.state.errors\n        error['subdomain'] = 'Oops! We can’t find that organisation in OLIVE VLE.please try with mykademy/myportfolio'\n        this.setState({ errors: error, loader: false });\n\n      }\n      console.log(response,'get responseeeeeeeee')\n    })\n    .catch((err)=>{\n      let error = this.state.errors\n        error['subdomain'] = 'Oops! We can’t find that organisation in OLIVE VLE.please try with mykademy/myportfolio'\n        this.setState({ errors: error, loader: false });\n\n      console.log(err)\n    })\n  }\n\n  subdomainValidation = async (e) => {\n    e.preventDefault();\n    this.setState({\n      loader: true, isInvalidCredentials: false\n    })\n    console.log(this.state.user.subdomain, 'hereeeeeeeeeee')\n    const yourDate = moment(new Date());\n    const newDate = yourDate.format(\"DD-MM-YYYY\");\n    const secret = config.mykademy.REACT_APP_MYKADEMY_SUBDOMAIN_VALIDATION_SECRET;\n    const data = {\n      signature:\n        \"mykademy microsoft-teams-app:\" + config.mykademy.APP_TOKEN_CREATE,\n      app_name: \"microsoft teams\",\n      account_domain: `${this.state.user.subdomain}.mykademy.com`,\n      date: newDate,\n    };\n    const jwt = sign(data, secret);\n    const headers = {\n      Authorization: `mykademy microsoft-teams-app:${jwt}`,\n    };\n    await mykademyApis\n      .domainValidation(headers)\n      .then((response) => {\n        if (response.data.status === 200) {\n          localStorage.setItem(\n            \"platfrom\",\n           \"olivevle\"\n          );\n          localStorage.setItem(\n            \"mykademy_app_token\",\n            response.data.data.app_signature\n          );\n        }\n        this.setState({ show_login: true, loader: false });\n      })\n      .catch((err) => {\n        console.log(err);\n        let error = this.state.errors\n        error['subdomain'] = 'Oops! We can’t find that organisation. Remember to avoid using spaces.'\n        this.setState({ errors: error, loader: false });\n\n      });\n  }\n  updateStateFromChild = (val) => {\n    this.setState(val)\n  }\n\n  render() {\n    if (this.state.single_auth) {\n      return (\n        <ChooseAuth updateStateFromChild={this.updateStateFromChild} > </ChooseAuth>\n      )\n    } else\n      return (\n        <React.Fragment>\n          {/* {this.state.choose_login_type ?\n            <div class=\"modal fade organization-modal show\" id=\"orgModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-modal=\"true\" role=\"dialog\" style={{ display: 'block' }}>\n              <div class=\"\">\n                <div class=\"modal-content\" style={{ height: '100vh' }}>\n                  <div class=\"modal-body\">\n                    <form onSubmit={this.subdomainValidation}>\n                      {!this.state.loader ? (\n                        <div id=\"olive-step-1\" class=\"step active\">\n                          <img class=\"olive-logo-rounded\" src=\"assets/images/landing/olive-logo-rounded.jpg\" alt=\"olive logo rounded\" />\n                          <h4>Sign in method</h4>\n                          <p style={{ marginBottom: '10px' }}>Please select your sign in method below.</p>\n                          <div class=\"row\">\n                            <div class=\"col-xs-12 col-sm-6 col-separater\">\n                              <a class=\"sign-method-wrap\" onClick={() => this.setState({ choose_login_type: false })} href=\"javascript:void(0);\" data-tab=\"olive-step-2\">\n                                <img class=\"olive-logo-rounded\" src=\"assets/images/landing/olive-logo-rounded.jpg\" alt=\"olive logo rounded\" />\n                                <h4>OLIVE VLE</h4>\n                                <span>Select</span>\n                                <p>You would have received an email outlining the sign in process for this type of account.</p>\n                              </a>\n\n                            </div>\n                            <div class=\"col-xs-12 col-sm-6\">\n                              <a class=\"sign-method-wrap\" onClick={() => this.setState({ single_auth: true })} href=\"javascript:void(0);\" data-tab=\"multi-step\">\n                                <img style={{ marginRight: '5px' }} class=\"olive-logo-rounded\" src=\"assets/images/landing/my-kademy-logo.png\" alt=\"my kademy\" />\n                                <img class=\"olive-logo-rounded\" src=\"assets/images/landing/my-portfolio-logo.png\" alt=\"my portfolio\" />\n                                <h4>myKademy or myPortfolio</h4>\n                                <span>Select</span>\n                                <p>Use this sign in method if you have typically used myKademy or myPortfolio outside of Teams.</p>\n                              </a>\n                            </div>\n                          </div>\n\n                          <div class=\"need-help\">\n                            <p>Need help signing in? Visit our support page <a href=\"javascript:void(0);\">here.</a></p>\n                          </div>\n                          <div class=\"btn-wrap\">\n                            <a onClick={() => this.closeModal()} href=\"javascript:void(0);\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</a>\n                          </div>\n                        </div>\n                      ) : (\n                          <div class=\"step step-3 active\">\n                            <div class=\"d-flex justify-content-center align-items-center spinner-content h-380\">\n                              <div class=\"spinner-border\" role=\"status\">\n                                <span class=\"visually-hidden\">Loading...</span>\n                              </div>\n                            </div>\n                          </div>\n                        )}\n                    </form>\n                  </div>\n                </div>\n              </div>\n            </div>\n            : */}\n            <div>\n              {!this.state.show_login ? (\n                <div onLoad={localStorage.removeItem('legacy')} class=\"modal fade organization-modal show\" id=\"orgModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-modal=\"true\" role=\"dialog\" style={{ display: 'block' }}>\n                  <div class=\"\">\n                    <div class=\"modal-content\" style={{ height: '100vh' }}>\n                      <div class=\"modal-body\">\n                        <form onSubmit={this.check_vle_db}>\n                          {!this.state.loader ? (\n                            <div className=\"step step-1 active\">\n                              <img class=\"olive-logo-rounded\" src=\"assets/images/landing/olive-logo-rounded.jpg\" alt=\"olive logo rounded\" />\n                              <h4>Sign in to your organisation</h4>\n                              <p>Please enter your organisation’s URL:</p>\n                              <div class=\"input-wrap\">\n                                <input\n                                  autoFocus\n                                  type=\"text\"\n                                  className={this.state.errors.subdomain ? \"form-control input-error\" : \"form-control\"}\n                                  placeholder=\"your-organisation\"\n                                  value={this.state.user.subdomain || ''}\n                                  onChange={(e) => this.updateDomain(e)}\n                                  onKeyDown={(e) =>\n                                    e.key === \" \" ? e.preventDefault() : \"\"\n                                  }\n                                />\n                                {/* <input type=\"text\" class=\"form-control input-error\" placeholder=\"your-organisation\" required=\"\" /> */}\n                                {this.state.errors.subdomain &&\n                                  <div class=\"error-msg\">{this.state.errors.subdomain}</div>\n                                }\n                              </div>\n                              <p>This will give you access to OLIVE’s product suite.</p>\n                              {/* <span class=\"access-link\">https://\n                        <span >{this.state.user.subdomain ? this.state.user.subdomain : \"subdomain\"} </span>\n                        .connectedportfolio.com\n                      </span>\n                              <span class=\"access-link\">https://\n                        <span >{this.state.user.subdomain ? this.state.user.subdomain : \"subdomain\"} </span>\n                        .mykademy.com\n                      </span> */}\n                              <div class=\"btn-wrap\">\n                                <button type=\"button\" onClick={() => this.closeModal()} class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                                <button\n                                  type=\"submit\"\n                                  class=\"btn btn-primary next-btn\"\n                                  disabled={!this.state.user?.subdomain}\n                                  style={{\n                                    backgroundColor: this.state.user?.subdomain\n                                      ? \"#585a96\"\n                                      : \"#6c757d\",\n                                  }}\n                                >Continue</button>\n                                {/* <!-- btn-opacity --> */}\n                              </div>\n                              <a onClick={() => this.setState({ single_auth: true })} style={{color:'#6264A7'}} class=\"sign-in-option\" href=\"javascript:void(0);\">Legacy sign in options</a>\n                            </div>\n                          ) : (\n                              <div class=\"step step-3 active\">\n                                <div class=\"d-flex justify-content-center align-items-center spinner-content h-380\">\n                                  <div class=\"spinner-border\" role=\"status\">\n                                    <span class=\"visually-hidden\">Loading...</span>\n                                  </div>\n                                </div>\n                              </div>\n                            )}\n                        </form>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                  <div class=\"modal fade organization-modal show\" id=\"orgModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-modal=\"true\" role=\"dialog\" style={{ display: 'block' }}>\n                    <div class=\"\">\n                      <div class=\"modal-content\" style={{ height: '100vh' }}>\n                        <div class=\"modal-body\">\n                          <form onSubmit={this.loginSubmit}>\n                            {!this.state.btnLoading ? (\n                              <div class=\"step step-2 active\">\n                                <img class=\"olive-logo-rounded\" src=\"assets/images/landing/olive-logo-rounded.jpg\" alt=\"olive logo rounded\" />\n                                <h4>Sign in to your organisation</h4>\n                                <p class=\"mb-20\">Please enter your credentials below:</p>\n                                <div class=\"input-wrap\">\n                                  <div class=\"form-group\">\n                                    <label for=\"\">Email Address or Username</label>\n                                    <input\n                                      autoFocus\n                                      type=\"email\"\n                                      className={this.state.isInvalidCredentials ? \"form-control input-error\" : \"form-control\"} placeholder=\"name@email-address.com\"\n                                      onChange={this.inputhandle.bind(this, \"email\")}\n                                    />\n                                  </div>\n                                  <div class=\"form-group\">\n                                    <label for=\"\">Password</label>\n                                    <input\n                                      type=\"password\"\n                                      className={this.state.isInvalidCredentials ? \"form-control input-error\" : \"form-control\"}\n                                      placeholder=\"Your password\"\n                                      onChange={this.inputhandle.bind(this, \"password\")}\n                                    />\n                                  </div>\n                                  {\n                                    this.state.isInvalidCredentials &&\n                                    <div class=\"error-msg\">Sorry you entered incorrect email / password combination for Olive VLE.</div>\n                                  }\n                                </div>\n                                {/* <a class=\"trouble-signing\" href=\"javascript:void(0);\"> Forgotten your password?</a> */}\n                                <div class=\"btn-wrap\">\n                                  <button onClick={(e) => this.setState({ show_login: false })} type=\"button\" class=\"btn btn-secondary previous-btn\">Back</button>\n                                  <button\n                                    type=\"submit\"\n                                    class=\"btn btn-primary next-btn\"\n                                    disabled={\n                                      this.state.formValied === \"false\" &&\n                                      this.state.subdomain\n                                    }\n                                    style={{\n                                      backgroundColor:\n                                        this.state.formValied === \"true\"\n                                          ? \"#585a96\"\n                                          : \"#6c757d\",\n                                      width: \"75px\",\n                                    }}\n                                  >Sign in</button>\n                                </div>\n                              </div>\n                            ) : (\n                                <div class=\"step step-3 active\">\n                                  <div class=\"d-flex justify-content-center align-items-center spinner-content h-380\">\n                                    <div class=\"spinner-border\" role=\"status\">\n                                      <span class=\"visually-hidden\">Loading...</span>\n                                    </div>\n                                  </div>\n                                </div>\n                              )\n                            }\n                          </form>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )\n              }\n            </div>\n          \n        </React.Fragment>\n      );\n  }\n}\n"],"sourceRoot":""}
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"6dU7":function(t,e,i){"use strict";i.r(e);var o=i("ofXK"),s=i("tyNb"),a=i("3Pt+"),c=i("0IaG"),r=i("fXoL"),n=i("kmnG"),l=i("qFsG"),h=i("bTqV"),p=i("0Lhs");function d(t,e){1&t&&(r.bc(0,"p",12),r.Pc(1,"*Please fill all the fields"),r.ac())}let u=(()=>{class t{constructor(t,e,i){this.data=t,this.dialogRef=e,this.fb=i}ngOnInit(){this.buildItemForm(this.data.payload)}buildItemForm(t){this.itemForm=this.fb.group({name:[t.name||"",a.t.required],code:[t.code||"",a.t.required]})}submit(){this.itemForm.value.name=this.itemForm.value.name.trim(),this.itemForm.value.code=this.itemForm.value.code.trim(),this.itemForm.value.code.length>0&&this.itemForm.value.name.length>0?this.dialogRef.close(this.itemForm.value):this.validationErrors=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.a),r.Vb(c.f),r.Vb(a.c))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-state-popup"]],decls:18,vars:7,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","50",1,"pr-1"],[1,"full-width","p-b-10"],["matInput","","name","username","formControlName","name","placeholder","State"],["matInput","","name","username","formControlName","code","placeholder","State Code"],["class","error-msg",4,"ngIf"],["fxFlex","100",1,"mt-1"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],[1,"error-msg"]],template:function(t,e){1&t&&(r.bc(0,"h1",0),r.Pc(1),r.ac(),r.bc(2,"form",1),r.jc("ngSubmit",(function(t){return e.submit()})),r.bc(3,"div",2),r.bc(4,"div",3),r.bc(5,"mat-form-field",4),r.Wb(6,"input",5),r.ac(),r.ac(),r.bc(7,"div",3),r.bc(8,"mat-form-field",4),r.Wb(9,"input",6),r.ac(),r.ac(),r.Nc(10,d,2,0,"p",7),r.bc(11,"div",8),r.bc(12,"button",9),r.Pc(13),r.oc(14,"translate"),r.ac(),r.Wb(15,"span",10),r.bc(16,"button",11),r.jc("click",(function(t){return e.dialogRef.close(!1)})),r.Pc(17,"Cancel"),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(1),r.Qc(e.data.title),r.Gb(1),r.sc("formGroup",e.itemForm),r.Gb(8),r.sc("ngIf",e.validationErrors),r.Gb(2),r.sc("disabled",e.itemForm.invalid),r.Gb(1),r.Qc(r.pc(14,5,"SAVE")))},directives:[c.g,a.u,a.o,a.h,n.b,l.b,a.b,a.n,a.f,o.l,h.b],pipes:[p.c],styles:[".p-b-10[_ngcontent-%COMP%]{padding-bottom:10px}.error-msg[_ngcontent-%COMP%]{color:red}"]}),t})();var m=i("3sEA"),g=i("z6cu"),b=i("AytR"),f=i("tk/3");let v=(()=>{class t{constructor(t){this.http=t,this.apiUrl=b.a.apiURL}getStates(){return this.http.get(this.apiUrl+"location/state/list")}getstate(t){return this.http.get(this.apiUrl+"location/state/details/"+t)}deleteState(t){return this.http.get(this.apiUrl+"location/state/delete/"+t)}addState(t){return this.http.post(this.apiUrl+"location/state/add",t)}updateState(t,e){return this.http.post(this.apiUrl+"location/state/update/"+t,e)}getDistricts(){return this.http.get(this.apiUrl+"location/district/list")}deleteDistrict(t){return this.http.get(this.apiUrl+"location/district/delete/"+t)}addDistrict(t){return this.http.post(this.apiUrl+"location/district/add",t)}updateDistrict(t,e){return this.http.post(this.apiUrl+"location/district/update/"+t,e)}getDistrict(t){return this.http.get(this.apiUrl+"location/district/details/"+t)}getRegions(){return this.http.get(this.apiUrl+"location/region/list")}deleteRegion(t){return this.http.get(this.apiUrl+"location/region/delete/"+t)}addRegion(t){return this.http.post(this.apiUrl+"location/region/add",t)}updateRegion(t,e){return this.http.post(this.apiUrl+"location/region/update/"+t,e)}getRegion(t){return this.http.get(this.apiUrl+"location/region/details/"+t)}errorHandler(t){let e="";return e=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,Object(g.a)(e)}}return t.\u0275fac=function(e){return new(e||t)(r.fc(f.c))},t.\u0275prov=r.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var x=i("3kSh"),w=i("quSY"),S=i("dNgK"),y=i("Wp6s"),C=i("lDzL"),A=i("1jcm"),P=i("NFeN");function I(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.name," ")}}function M(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.code," ")}}function _(t,e){if(1&t){const t=r.cc();r.bc(0,"mat-slide-toggle",9),r.jc("change",(function(i){r.Gc(t);const o=e.row;return r.nc().statusChange(o,i)})),r.ac()}if(2&t){const t=e.row;r.sc("checked","active"===(null==t?null:t.status))}}function O(t,e){if(1&t){const t=r.cc();r.bc(0,"button",10),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().openPopUp(o)})),r.bc(1,"mat-icon"),r.Pc(2,"edit"),r.ac(),r.ac(),r.bc(3,"button",11),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().deleteItem(o)})),r.bc(4,"mat-icon"),r.Pc(5,"delete"),r.ac(),r.ac()}}let G=(()=>{class t{constructor(t,e,i,o,s){this.dialog=t,this.snack=e,this.locationApiService=i,this.confirmServive=o,this.loader=s,this.states=[],this.statesArray=[],this.subscripition=new w.a}ngOnInit(){this.loader.open(),this.getStates()}getStates(){this.subscripition.add(this.locationApiService.getStates().subscribe(t=>{this.states=[...t.result],this.loader.close()},t=>{this.loader.close()}))}openPopUp(t={},e){this.dialog.open(u,{width:"520px",disableClose:!0,data:{title:e?"Add New State":"Update state",payload:t}}).afterClosed().subscribe(i=>{i&&(this.loader.open(),this.subscripition.add(e?this.locationApiService.addState(i).subscribe(t=>{this.loader.close(),"success"===t.status&&(this.states.push(t.result),this.states=[...this.states],this.snack.open("State Added!","OK",{duration:4e3}))},t=>{this.loader.close()}):this.locationApiService.updateState(t._id,i).subscribe(e=>{this.loader.close(),"success"===e.status&&(this.getState(t._id,"update"),this.snack.open("State Updated!","OK",{duration:4e3}))},t=>{this.loader.close()})))})}getState(t,e){this.subscripition.add(this.locationApiService.getstate(t).subscribe(t=>{"update"===e&&this.states.forEach((e,i)=>{e._id===t.result._id&&(this.states[i]=t.result,this.states=[...this.states])})},t=>{this.loader.close()}))}deleteItem(t){this.subscripition.add(this.confirmServive.confirm({message:`Delete ${t.name}?`}).subscribe(e=>{e&&(this.loader.open(),this.states.forEach((e,i)=>{e._id===t._id&&this.states.splice(i,1)}),this.states=[...this.states],this.locationApiService.deleteState(t._id).subscribe(t=>{this.loader.close(),"success"===t.status&&this.snack.open("State deleted!","OK",{duration:4e3})},t=>{this.loader.close()}))}))}statusChange(t,e){this.loader.open(),this.subscripition.add(this.locationApiService.updateState(t._id,{status:e.checked?"active":"inactive"}).subscribe(e=>{this.loader.close(),"success"===e.status&&(this.getState(t._id,"update"),this.snack.open("Status Updated!","OK",{duration:4e3}))},t=>{this.loader.close()}))}ngOnDestroy(){this.subscripition.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.b),r.Vb(S.a),r.Vb(v),r.Vb(x.a),r.Vb(m.a))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-state"]],decls:16,vars:16,consts:[[1,"m-333"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","limit","rowHeight"],["name","State",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","State Code",3,"flexGrow"],["name","Active",3,"flexGrow"],["name","Actions",3,"flexGrow"],[3,"checked","change"],["mat-icon-button","","mat-sm-button","","color","primary",1,"mr-1",3,"click"],["mat-icon-button","","mat-sm-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(r.bc(0,"div",0),r.bc(1,"button",1),r.jc("click",(function(t){return e.openPopUp({},!0)})),r.Pc(2),r.oc(3,"translate"),r.oc(4,"translate"),r.ac(),r.ac(),r.bc(5,"mat-card",2),r.bc(6,"mat-card-content",2),r.bc(7,"ngx-datatable",3),r.bc(8,"ngx-datatable-column",4),r.Nc(9,I,1,1,"ng-template",5),r.ac(),r.bc(10,"ngx-datatable-column",6),r.Nc(11,M,1,1,"ng-template",5),r.ac(),r.bc(12,"ngx-datatable-column",7),r.Nc(13,_,1,1,"ng-template",5),r.ac(),r.bc(14,"ngx-datatable-column",8),r.Nc(15,O,6,0,"ng-template",5),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(2),r.Sc("",r.pc(3,12,"ADD")," ",r.pc(4,14,"State"),""),r.Gb(5),r.sc("rows",e.states)("columnMode","force")("headerHeight",50)("footerHeight",50)("limit",10)("rowHeight",50),r.Gb(1),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1))},directives:[h.b,y.a,y.b,C.d,C.b,C.a,A.a,P.a],pipes:[p.c],styles:[""]}),t})();var k=i("d3UM"),R=i("FKr1");function F(t,e){if(1&t&&(r.bc(0,"mat-option",14),r.Pc(1),r.ac()),2&t){const t=e.$implicit;r.sc("value",t._id),r.Gb(1),r.Qc(t.name)}}function z(t,e){1&t&&(r.bc(0,"p",15),r.Pc(1,"*Please fill all the fields"),r.ac())}let E=(()=>{class t{constructor(t,e,i,o,s){this.data=t,this.locationApiService=e,this.dialogRef=i,this.fb=o,this.loader=s,this.subscripition=new w.a,this.states=[]}ngOnInit(){this.loader.open(),this.getStates(),this.buildItemForm(this.data.payload)}getStates(){this.subscripition.add(this.locationApiService.getStates().subscribe(t=>{this.states=t.result,this.loader.close()},t=>{this.loader.close()}))}buildItemForm(t){var e,i;this.itemForm=this.fb.group({state:[(null===(i=null===(e=t)||void 0===e?void 0:e.state)||void 0===i?void 0:i._id)||null,a.t.required],name:[t.name||null,a.t.required],code:[t.code||null,a.t.required]})}submit(){this.itemForm.value.name=this.itemForm.value.name.trim(),this.itemForm.value.code=this.itemForm.value.code.trim(),this.itemForm.value.code.length>0&&this.itemForm.value.name.length>0?this.dialogRef.close(this.itemForm.value):this.validationErrors=!0}ngOnDestroy(){this.loader.close(),this.subscripition.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.a),r.Vb(v),r.Vb(c.f),r.Vb(a.c),r.Vb(m.a))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-district-popup"]],decls:22,vars:8,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","50",1,"pr-1"],[1,"full-width","p-b-10"],["placeholder","Select State","name","state","formControlName","state",1,"full-width","state-box"],["ngDefaultControl","",3,"value",4,"ngFor","ngForOf"],["matInput","","name","username","formControlName","name","placeholder","District"],["matInput","","name","username","formControlName","code","placeholder","District Code"],["class","error-msg",4,"ngIf"],["fxFlex","100",1,"mt-1"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],["ngDefaultControl","",3,"value"],[1,"error-msg"]],template:function(t,e){1&t&&(r.bc(0,"h1",0),r.Pc(1),r.ac(),r.bc(2,"form",1),r.jc("ngSubmit",(function(t){return e.submit()})),r.bc(3,"div",2),r.bc(4,"div",3),r.bc(5,"mat-form-field",4),r.bc(6,"mat-select",5),r.Nc(7,F,2,2,"mat-option",6),r.ac(),r.ac(),r.ac(),r.bc(8,"div",3),r.bc(9,"mat-form-field",4),r.Wb(10,"input",7),r.ac(),r.ac(),r.bc(11,"div",3),r.bc(12,"mat-form-field",4),r.Wb(13,"input",8),r.ac(),r.ac(),r.Nc(14,z,2,0,"p",9),r.bc(15,"div",10),r.bc(16,"button",11),r.Pc(17),r.oc(18,"translate"),r.ac(),r.Wb(19,"span",12),r.bc(20,"button",13),r.jc("click",(function(t){return e.dialogRef.close(!1)})),r.Pc(21,"Cancel"),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(1),r.Qc(e.data.title),r.Gb(1),r.sc("formGroup",e.itemForm),r.Gb(5),r.sc("ngForOf",e.states),r.Gb(7),r.sc("ngIf",e.validationErrors),r.Gb(2),r.sc("disabled",e.itemForm.invalid),r.Gb(1),r.Qc(r.pc(18,6,"SAVE")))},directives:[c.g,a.u,a.o,a.h,n.b,k.a,a.n,a.f,o.k,l.b,a.b,o.l,h.b,R.p],pipes:[p.c],styles:[".state-box[_ngcontent-%COMP%]{width:120px}.p-b-10[_ngcontent-%COMP%]{padding-bottom:10px}.error-msg[_ngcontent-%COMP%]{color:red}"]}),t})();function U(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.name," ")}}function D(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.code," ")}}function V(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.state.name," ")}}function T(t,e){if(1&t){const t=r.cc();r.bc(0,"mat-slide-toggle",10),r.jc("change",(function(i){r.Gc(t);const o=e.row;return r.nc().statusChange(o,i)})),r.ac()}if(2&t){const t=e.row;r.sc("checked","active"===(null==t?null:t.status))}}function W(t,e){if(1&t){const t=r.cc();r.bc(0,"button",11),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().openPopUp(o)})),r.bc(1,"mat-icon"),r.Pc(2,"edit"),r.ac(),r.ac(),r.bc(3,"button",12),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().deleteItem(o)})),r.bc(4,"mat-icon"),r.Pc(5,"delete"),r.ac(),r.ac()}}let j=(()=>{class t{constructor(t,e,i,o,s){this.dialog=t,this.snack=e,this.locationApiService=i,this.loader=o,this.confirmService=s,this.districts=[],this.subscripition=new w.a}ngOnInit(){this.loader.open(),this.getStates()}getStates(){this.subscripition.add(this.locationApiService.getDistricts().subscribe(t=>{this.districts=[...t.result],this.loader.close()},t=>{this.loader.close()}))}closeLoader(){this.loader.close()}openPopUp(t={},e){this.dialog.open(E,{width:"520px",disableClose:!0,data:{title:e?"Add New District":"Update District",payload:t}}).afterClosed().subscribe(i=>{i&&(this.loader.open(),this.subscripition.add(e?this.locationApiService.addDistrict(i).subscribe(t=>{this.loader.close(),"success"===t.status&&(this.getDistrict(t.result._id,"add"),this.snack.open("District Added!","OK",{duration:4e3}))},t=>{this.loader.close()}):this.locationApiService.updateDistrict(t._id,i).subscribe(t=>{this.loader.close(),"success"===t.status&&(this.getDistrict(t.result._id,"update"),this.snack.open("District Updated!","OK",{duration:4e3}))},t=>{this.loader.close()})))})}getDistrict(t,e){this.subscripition.add(this.locationApiService.getDistrict(t).subscribe(t=>{"add"===e?(this.districts.push(t.result),this.districts=[...this.districts]):this.districts.forEach((e,i)=>{e._id===t.result._id&&(this.districts[i]=t.result,this.districts=[...this.districts])})},t=>{this.loader.close()}))}deleteItem(t){this.subscripition.add(this.confirmService.confirm({message:`Delete ${t.name}?`}).subscribe(e=>{e&&(this.loader.open(),this.districts.forEach((e,i)=>{e._id===t._id&&this.districts.splice(i,1)}),this.districts=[...this.districts],this.locationApiService.deleteDistrict(t._id).subscribe(t=>{this.loader.close(),"success"===t.status&&this.snack.open("District deleted!","OK",{duration:4e3})}))},t=>{this.loader.close()}))}statusChange(t,e){this.loader.open(),this.subscripition.add(this.locationApiService.updateDistrict(t._id,{status:e.checked?"active":"inactive"}).subscribe(e=>{this.loader.close(),"success"===e.status&&(this.getDistrict(t._id,"update"),this.snack.open("Status Updated!","OK",{duration:4e3}))},t=>{this.loader.close()}))}ngOnDestroy(){this.subscripition.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.b),r.Vb(S.a),r.Vb(v),r.Vb(m.a),r.Vb(x.a))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-district"]],decls:18,vars:18,consts:[[1,"m-333"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","limit","rowHeight"],["name","District",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","District Code",3,"flexGrow"],["name","State",3,"flexGrow"],["name","Active",3,"flexGrow"],["name","Actions",3,"flexGrow"],[3,"checked","change"],["mat-icon-button","","mat-sm-button","","color","primary",1,"mr-1",3,"click"],["mat-icon-button","","mat-sm-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(r.bc(0,"div",0),r.bc(1,"button",1),r.jc("click",(function(t){return e.openPopUp({},!0)})),r.Pc(2),r.oc(3,"translate"),r.oc(4,"translate"),r.ac(),r.ac(),r.bc(5,"mat-card",2),r.bc(6,"mat-card-content",2),r.bc(7,"ngx-datatable",3),r.bc(8,"ngx-datatable-column",4),r.Nc(9,U,1,1,"ng-template",5),r.ac(),r.bc(10,"ngx-datatable-column",6),r.Nc(11,D,1,1,"ng-template",5),r.ac(),r.bc(12,"ngx-datatable-column",7),r.Nc(13,V,1,1,"ng-template",5),r.ac(),r.bc(14,"ngx-datatable-column",8),r.Nc(15,T,1,1,"ng-template",5),r.ac(),r.bc(16,"ngx-datatable-column",9),r.Nc(17,W,6,0,"ng-template",5),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(2),r.Sc(" ",r.pc(3,14,"ADD")," ",r.pc(4,16,"District")," "),r.Gb(5),r.sc("rows",e.districts)("columnMode","force")("headerHeight",50)("footerHeight",50)("scrollbarH",!0)("limit",10)("rowHeight",50),r.Gb(1),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1))},directives:[h.b,y.a,y.b,C.d,C.b,C.a,A.a,P.a],pipes:[p.c],styles:[""]}),t})();function H(t,e){if(1&t&&(r.bc(0,"mat-option",14),r.Pc(1),r.ac()),2&t){const t=e.$implicit;r.sc("value",t._id),r.Gb(1),r.Qc(t.name)}}function N(t,e){if(1&t&&(r.bc(0,"mat-option",14),r.Pc(1),r.ac()),2&t){const t=e.$implicit;r.sc("value",t._id),r.Gb(1),r.Qc(t.name)}}function L(t,e){1&t&&(r.bc(0,"p",15),r.Pc(1,"*Please fill all the fields"),r.ac())}let B=(()=>{class t{constructor(t,e,i,o,s){this.data=t,this.dialogRef=e,this.fb=i,this.locationApiService=o,this.loader=s,this.subscripition=new w.a,this.states=[],this.Districts=[]}ngOnInit(){this.loader.open(),this.getStates(),this.getDistricts(),this.buildItemForm(this.data.payload)}getStates(){this.subscripition.add(this.locationApiService.getStates().subscribe(t=>{this.states=t.result},t=>{this.loader.close()}))}getDistricts(){this.subscripition.add(this.locationApiService.getDistricts().subscribe(t=>{this.Districts=t.result,this.loader.close()},t=>{this.loader.close()}))}buildItemForm(t){var e,i,o,s;this.itemForm=this.fb.group({name:[t.name||null,a.t.required],state:[(null===(i=null===(e=t)||void 0===e?void 0:e.state)||void 0===i?void 0:i._id)||null,a.t.required],district:[(null===(s=null===(o=t)||void 0===o?void 0:o.district)||void 0===s?void 0:s._id)||null,a.t.required]})}submit(){this.itemForm.value.name=this.itemForm.value.name.trim(),this.itemForm.value.name.length>0?this.dialogRef.close(this.itemForm.value):this.validationErrors=!0}ngOnDestroy(){this.loader.close(),this.subscripition.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.a),r.Vb(c.f),r.Vb(a.c),r.Vb(v),r.Vb(m.a))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-region-popup"]],decls:22,vars:9,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","50",1,"pr-1"],[1,"full-width","p-b-10"],["placeholder","Select State","name","state","formControlName","state",1,"full-width","state-box"],["ngDefaultControl","",3,"value",4,"ngFor","ngForOf"],["placeholder","Select District","name","state","formControlName","district",1,"full-width","state-box"],["matInput","","name","region","formControlName","name","placeholder","Region"],["class","error-msg",4,"ngIf"],["fxFlex","100",1,"mt-1"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],["ngDefaultControl","",3,"value"],[1,"error-msg"]],template:function(t,e){1&t&&(r.bc(0,"h1",0),r.Pc(1),r.ac(),r.bc(2,"form",1),r.jc("ngSubmit",(function(t){return e.submit()})),r.bc(3,"div",2),r.bc(4,"div",3),r.bc(5,"mat-form-field",4),r.bc(6,"mat-select",5),r.Nc(7,H,2,2,"mat-option",6),r.ac(),r.ac(),r.bc(8,"mat-form-field",4),r.bc(9,"mat-select",7),r.Nc(10,N,2,2,"mat-option",6),r.ac(),r.ac(),r.ac(),r.bc(11,"div",3),r.bc(12,"mat-form-field",4),r.Wb(13,"input",8),r.ac(),r.ac(),r.Nc(14,L,2,0,"p",9),r.bc(15,"div",10),r.bc(16,"button",11),r.Pc(17),r.oc(18,"translate"),r.ac(),r.Wb(19,"span",12),r.bc(20,"button",13),r.jc("click",(function(t){return e.dialogRef.close(!1)})),r.Pc(21,"Cancel"),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(1),r.Qc(e.data.title),r.Gb(1),r.sc("formGroup",e.itemForm),r.Gb(5),r.sc("ngForOf",e.states),r.Gb(3),r.sc("ngForOf",e.Districts),r.Gb(4),r.sc("ngIf",e.validationErrors),r.Gb(2),r.sc("disabled",e.itemForm.invalid),r.Gb(1),r.Qc(r.pc(18,7,"SAVE")))},directives:[c.g,a.u,a.o,a.h,n.b,k.a,a.n,a.f,o.k,l.b,a.b,o.l,h.b,R.p],pipes:[p.c],styles:[".p-b-10[_ngcontent-%COMP%]{padding-bottom:10px}.error-msg[_ngcontent-%COMP%]{color:red}"]}),t})();function Q(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.name," ")}}function K(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.state.name," ")}}function q(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.district.name," ")}}function X(t,e){if(1&t){const t=r.cc();r.bc(0,"mat-slide-toggle",10),r.jc("change",(function(i){r.Gc(t);const o=e.row;return r.nc().statusChange(o,i)})),r.ac()}if(2&t){const t=e.row;r.sc("checked","active"===(null==t?null:t.status))}}function Y(t,e){if(1&t){const t=r.cc();r.bc(0,"button",11),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().openPopUp(o)})),r.bc(1,"mat-icon"),r.Pc(2,"edit"),r.ac(),r.ac(),r.bc(3,"button",12),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().deleteItem(o)})),r.bc(4,"mat-icon"),r.Pc(5,"delete"),r.ac(),r.ac()}}let $=(()=>{class t{constructor(t,e,i,o,s){this.dialog=t,this.snack=e,this.locationApiService=i,this.confirmService=o,this.loader=s,this.subscripition=new w.a,this.regions=[]}ngOnInit(){this.loader.open(),this.getStates()}getStates(){this.subscripition.add(this.locationApiService.getRegions().subscribe(t=>{this.regions=[...t.result],this.loader.close()},t=>{this.loader.close()}))}openPopUp(t={},e){this.dialog.open(B,{width:"520px",disableClose:!0,data:{title:e?"Add New Region":"Update Region",payload:t}}).afterClosed().subscribe(i=>{i&&(this.loader.open(),this.subscripition.add(e?this.locationApiService.addRegion(i).subscribe(t=>{this.loader.close(),"success"===t.status&&(this.getRegion(t.result._id,"add"),this.snack.open("Region Added!","OK",{duration:4e3}))},t=>{this.loader.close()}):this.locationApiService.updateRegion(t._id,i).subscribe(t=>{this.loader.close(),"success"===t.status&&(this.getRegion(t.result._id,"update"),this.snack.open("Region Updated!","OK",{duration:4e3}))},t=>{this.loader.close()})))})}getRegion(t,e){this.subscripition.add(this.locationApiService.getRegion(t).subscribe(t=>{"add"===e?(this.regions.push(t.result),this.regions=[...this.regions]):this.regions.forEach((e,i)=>{e._id===t.result._id&&(this.regions[i]=t.result,this.regions=[...this.regions])})},t=>{this.loader.close()}))}deleteItem(t){this.confirmService.confirm({message:`Delete ${t.name}?`}).subscribe(e=>{e&&(this.loader.open(),this.regions.forEach((e,i)=>{e._id===t._id&&this.regions.splice(i,1)}),this.regions=[...this.regions],this.subscripition.add(this.locationApiService.deleteRegion(t._id).subscribe(t=>{this.loader.close(),"success"===t.status&&this.snack.open("Region deleted!","OK",{duration:4e3})},t=>{this.loader.close()})))})}statusChange(t,e){this.loader.open(),this.subscripition.add(this.locationApiService.updateRegion(t._id,{status:e.checked?"active":"inactive"}).subscribe(e=>{this.loader.close(),"success"===e.status&&(this.getRegion(t._id,"update"),this.snack.open("Status Updated!","OK",{duration:4e3}))},t=>{this.loader.close()}))}ngOnDestroy(){this.subscripition.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.b),r.Vb(S.a),r.Vb(v),r.Vb(x.a),r.Vb(m.a))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-region"]],decls:18,vars:18,consts:[[1,"m-333"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","limit","rowHeight"],["name","Region",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","State",3,"flexGrow"],["name","District",3,"flexGrow"],["name","Active",3,"flexGrow"],["name","Actions",3,"flexGrow"],[3,"checked","change"],["mat-icon-button","","mat-sm-button","","color","primary",1,"mr-1",3,"click"],["mat-icon-button","","mat-sm-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(r.bc(0,"div",0),r.bc(1,"button",1),r.jc("click",(function(t){return e.openPopUp({},!0)})),r.Pc(2),r.oc(3,"translate"),r.oc(4,"translate"),r.ac(),r.ac(),r.bc(5,"mat-card",2),r.bc(6,"mat-card-content",2),r.bc(7,"ngx-datatable",3),r.bc(8,"ngx-datatable-column",4),r.Nc(9,Q,1,1,"ng-template",5),r.ac(),r.bc(10,"ngx-datatable-column",6),r.Nc(11,K,1,1,"ng-template",5),r.ac(),r.bc(12,"ngx-datatable-column",7),r.Nc(13,q,1,1,"ng-template",5),r.ac(),r.bc(14,"ngx-datatable-column",8),r.Nc(15,X,1,1,"ng-template",5),r.ac(),r.bc(16,"ngx-datatable-column",9),r.Nc(17,Y,6,0,"ng-template",5),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(2),r.Sc("",r.pc(3,14,"ADD")," ",r.pc(4,16,"Region"),""),r.Gb(5),r.sc("rows",e.regions)("columnMode","force")("headerHeight",50)("footerHeight",50)("scrollbarH",!0)("limit",10)("rowHeight",50),r.Gb(1),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1))},directives:[h.b,y.a,y.b,C.d,C.b,C.a,A.a,P.a],pipes:[p.c],styles:[""]}),t})();var J=i("hOig");let Z=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Pb({type:t,selectors:[["app-dashboard"]],decls:1,vars:0,template:function(t,e){1&t&&r.Wb(0,"app-admin-layout")},directives:[J.a],styles:[""]}),t})(),tt=(()=>{class t{constructor(t){this.http=t,this.apiUrl=b.a.apiURL}getCategorys(){return this.http.get(this.apiUrl+"product/category/list")}getCategory(t){return this.http.get(this.apiUrl+"product/category/details/"+t)}deleteCategory(t){return this.http.get(this.apiUrl+"product/category/delete/"+t)}addCategory(t){return this.http.post(this.apiUrl+"product/category/add",t)}updateCategory(t,e){return this.http.post(this.apiUrl+"product/category/update/"+t,e)}imageUpload(t,e){return this.http.post(this.apiUrl+"product/category/image/update/"+t,e)}addProduct(t){return this.http.post(this.apiUrl+"product/item/add",t)}updateProduct(t,e){return this.http.post(this.apiUrl+"product/item/update/"+t,e)}updateProductImage(t,e){return this.http.post(this.apiUrl+"product/item/image/update/"+t,e)}getProduct(t){return this.http.get(this.apiUrl+"product/item/details/"+t)}getAllProducts(){return this.http.get(this.apiUrl+"product/item/list")}deleteProduct(t){return this.http.get(this.apiUrl+"product/item/delete/"+t)}productImageUpload(t,e){return this.http.post(this.apiUrl+"product/item/image/update/"+t,e)}addAttribute(t){return this.http.post(this.apiUrl+"product/attribute/add",t)}updateAttribute(t,e){return this.http.post(this.apiUrl+"product/attribute/update/"+t,e)}getAllAttribute(){return this.http.get(this.apiUrl+"product/attribute/list")}getAttribute(t){return this.http.get(this.apiUrl+"product/attribute/details/"+t)}deleteAttribute(t){return this.http.get(this.apiUrl+"product/attribute/delete/"+t)}addSpecification(t){return t.item=t.item._id,this.http.post(this.apiUrl+"product/specification/add",t)}updateSpecification(t,e){return this.http.post(this.apiUrl+"product/specification/update/"+t,e)}getAllSpecification(){return this.http.get(this.apiUrl+"product/specification/list")}getSpecification(t){return this.http.get(this.apiUrl+"product/specification/details/"+t)}deleteSpecification(t){return this.http.delete(this.apiUrl+"product/specification/remove/"+t)}}return t.\u0275fac=function(e){return new(e||t)(r.fc(f.c))},t.\u0275prov=r.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var et=i("jhN1");const it=["wrapper"],ot=["sourceImage"];function st(t,e){if(1&t){const t=r.cc();r.bc(0,"img",4,5),r.jc("load",(function(e){return r.Gc(t),r.nc().imageLoadedInView()})),r.ac()}if(2&t){const t=r.nc();r.Mc("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),r.sc("src",t.safeImgDataUrl,r.Ic)}}function at(t,e){if(1&t){const t=r.cc();r.Zb(0),r.bc(1,"span",9),r.jc("mousedown",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"topleft")}))("touchstart",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"topleft")})),r.Wb(2,"span",10),r.ac(),r.bc(3,"span",11),r.Wb(4,"span",10),r.ac(),r.bc(5,"span",12),r.jc("mousedown",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"topright")}))("touchstart",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"topright")})),r.Wb(6,"span",10),r.ac(),r.bc(7,"span",13),r.Wb(8,"span",10),r.ac(),r.bc(9,"span",14),r.jc("mousedown",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"bottomright")}))("touchstart",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"bottomright")})),r.Wb(10,"span",10),r.ac(),r.bc(11,"span",15),r.Wb(12,"span",10),r.ac(),r.bc(13,"span",16),r.jc("mousedown",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"bottomleft")}))("touchstart",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"bottomleft")})),r.Wb(14,"span",10),r.ac(),r.bc(15,"span",17),r.Wb(16,"span",10),r.ac(),r.bc(17,"span",18),r.jc("mousedown",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"top")}))("touchstart",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"top")})),r.ac(),r.bc(18,"span",19),r.jc("mousedown",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"right")}))("touchstart",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"right")})),r.ac(),r.bc(19,"span",20),r.jc("mousedown",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"bottom")}))("touchstart",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"bottom")})),r.ac(),r.bc(20,"span",21),r.jc("mousedown",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"left")}))("touchstart",(function(e){r.Gc(t);const i=r.nc(2);return i.startMove(e,i.moveTypes.Resize,"left")})),r.ac(),r.Yb()}}function ct(t,e){if(1&t){const t=r.cc();r.bc(0,"div",6),r.jc("keydown",(function(e){return r.Gc(t),r.nc().keyboardAccess(e)})),r.bc(1,"div",7),r.jc("mousedown",(function(e){r.Gc(t);const i=r.nc();return i.startMove(e,i.moveTypes.Move)}))("touchstart",(function(e){r.Gc(t);const i=r.nc();return i.startMove(e,i.moveTypes.Move)})),r.ac(),r.Nc(2,at,21,0,"ng-container",8),r.ac()}if(2&t){const t=r.nc();r.Mc("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),r.Lb("rounded",t.roundCropper),r.Gb(2),r.sc("ngIf",!t.hideResizeSquares)}}const rt={Move:"move",Resize:"resize",Pinch:"pinch"};let nt=(()=>{class t{constructor(t,e){this.sanitizer=t,this.cd=e,this.Hammer="undefined"!=typeof window?window.Hammer:null,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.exifTransform={rotate:0,flip:!1},this.autoRotateSupported=new Promise(t=>{const e=new Image;e.onload=()=>{t(1===e.width&&2===e.height)},e.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="}),this.stepSize=3,this.marginLeft="0px",this.imageVisible=!1,this.moveTypes=rt,this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.disabled=!1,this.imageCropped=new r.o,this.startCropImage=new r.o,this.imageLoaded=new r.o,this.cropperReady=new r.o,this.loadImageFailed=new r.o,this.initCropper()}ngOnChanges(t){this.cropperStaticHeight&&this.cropperStaticWidth&&(this.hideResizeSquares=!0,this.cropperMinWidth=this.cropperStaticWidth,this.cropperMinHeight=this.cropperStaticHeight,this.maintainAspectRatio=!1),this.onChangesInputImage(t),this.originalImage&&this.originalImage.complete&&this.exifTransform&&(t.containWithinAspectRatio||t.canvasRotation)&&this.transformOriginalImage(),t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition(),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.initCropper(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent&&this.imageChangedEvent.target&&this.imageChangedEvent.target.files&&this.imageChangedEvent.target.files.length>0}setCssTransform(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.stepSize=this.initialStepSize,this.activatePinchGesture()}initCropper(){this.imageVisible=!1,this.transformedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.transformedSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImage(t,e){this.isValidImageType(e)?this.loadBase64Image(t):this.loadImageFailed.emit()}loadImageFile(t){const e=new FileReader;e.onload=e=>this.loadImage(e.target.result,t.type),e.readAsDataURL(t)}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(t)}loadBase64Image(t){this.autoRotateSupported.then(e=>this.checkExifAndLoadBase64Image(t,e)).then(()=>this.transformOriginalImage()).catch(t=>{this.loadImageFailed.emit(),this.originalImage=null,this.originalBase64=null,console.error(t)})}checkExifAndLoadBase64Image(t,e){return new Promise((i,o)=>{this.originalImage=new Image,this.originalImage.onload=()=>{this.originalBase64=t,this.exifTransform=function(t){switch("string"==typeof t&&(t=function(t){const e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");const e=atob(t),i=e.length,o=new Uint8Array(i);for(let s=0;s<i;s++)o[s]=e.charCodeAt(s);return o.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;const i=e.byteLength;let o=2;for(;o<i;){if(e.getUint16(o+2,!1)<=8)return-1;const t=e.getUint16(o,!1);if(o+=2,65505==t){if(1165519206!=e.getUint32(o+=2,!1))return-1;const t=18761==e.getUint16(o+=6,!1);o+=e.getUint32(o+4,t);const i=e.getUint16(o,t);o+=2;for(let s=0;s<i;s++)if(274==e.getUint16(o+12*s,t))return e.getUint16(o+12*s+8,t)}else{if(65280!=(65280&t))break;o+=e.getUint16(o,!1)}}return-1}(t)),t){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(e?-1:t),this.originalSize.width=this.originalImage.naturalWidth,this.originalSize.height=this.originalImage.naturalHeight,i()},this.originalImage.onerror=o,this.originalImage.src=t})}loadImageFromURL(t){const e=new Image;e.onerror=()=>this.loadImageFailed.emit(),e.onload=()=>{const t=document.createElement("canvas"),i=t.getContext("2d");t.width=e.width,t.height=e.height,i.drawImage(e,0,0),this.loadBase64Image(t.toDataURL())},e.crossOrigin="anonymous",e.src=t}transformOriginalImage(){if(!this.originalImage||!this.originalImage.complete||!this.exifTransform)return Promise.reject(new Error("No image loaded"));const t=this.transformImageBase64();return this.setTransformedImage(t)}transformImageBase64(){const t=this.canvasRotation+this.exifTransform.rotate;if(0===t&&!this.exifTransform.flip&&!this.containWithinAspectRatio)return this.originalBase64;const e=this.getTransformedSize(),i=document.createElement("canvas");i.width=e.width,i.height=e.height;const o=i.getContext("2d");return o.setTransform(this.exifTransform.flip?-1:1,0,0,1,i.width/2,i.height/2),o.rotate(Math.PI*(t/2)),o.drawImage(this.originalImage,-this.originalSize.width/2,-this.originalSize.height/2),i.toDataURL()}getTransformedSize(){const t=this.canvasRotation+this.exifTransform.rotate;if(this.containWithinAspectRatio){if(t%2){const t=this.originalSize.height/this.aspectRatio;return{width:Math.max(this.originalSize.height,this.originalSize.width*this.aspectRatio),height:Math.max(this.originalSize.width,t)}}{const t=this.originalSize.width/this.aspectRatio;return{width:Math.max(this.originalSize.width,this.originalSize.height*this.aspectRatio),height:Math.max(this.originalSize.height,t)}}}return t%2?{height:this.originalSize.width,width:this.originalSize.height}:{width:this.originalSize.width,height:this.originalSize.height}}setTransformedImage(t){return new Promise(e=>{this.transformedBase64=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t),this.transformedImage=new Image,this.transformedImage.onload=()=>{this.transformedSize.width=this.transformedImage.naturalWidth,this.transformedSize.height=this.transformedImage.naturalHeight,this.cd.markForCheck(),e()},this.transformedImage.src=this.transformedBase64})}imageLoadedInView(){null!=this.transformedImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0}onResize(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else Object(r.Z)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){const t=this.sourceImage.nativeElement;if(this.cropperStaticHeight&&this.cropperStaticWidth)this.cropper.x1=0,this.cropper.x2=t.offsetWidth>this.cropperStaticWidth?this.cropperStaticWidth:t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight>this.cropperStaticHeight?this.cropperStaticHeight:t.offsetHeight;else if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;const e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;const e=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-e)/2,this.cropper.x2=this.cropper.x1+e}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){t.key>="1"&&t.key<="9"&&(this.stepSize=+t.key)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const e=t.shiftKey?rt.Resize:rt.Move,i=t.altKey?this.getInvertedPositionForKey(t.key):this.getPositionForKey(t.key),o=this.getEventForKey(t.key,this.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,i),this.moveImg(o),this.moveStop()}getPositionForKey(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}getInvertedPositionForKey(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}getEventForKey(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:-1*e,clientY:0}}}startMove(t,e,i=null){this.moveStart&&this.moveStart.active&&this.moveStart.type===rt.Pinch||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper))}startPinch(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:rt.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===rt.Move?(this.move(t),this.checkCropperPosition(!0)):this.moveStart.type===rt.Resize&&(this.cropperStaticWidth||this.cropperStaticHeight||this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===rt.Pinch&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.transformedImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.transformedImage.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.transformedImage.height*this.maxSize.height):20}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}move(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i}resize(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"center":const o=t.scale,s=Math.abs(this.moveStart.x2-this.moveStart.x1)*o,a=Math.abs(this.moveStart.y2-this.moveStart.y1)*o,c=this.cropper.x1,r=this.cropper.y1;this.cropper.x1=Math.min(this.moveStart.clientX-s/2,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.clientY-a/2,this.cropper.y2-this.cropperScaledMinHeight),this.cropper.x2=Math.max(this.moveStart.clientX+s/2,c+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.clientY+a/2,r+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}checkAspectRatio(){let t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"center":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio;const i=Math.max(0-this.cropper.x1,0),o=Math.max(this.cropper.x2-this.maxSize.width,0),s=Math.max(this.cropper.y2-this.maxSize.height,0),a=Math.max(0-this.cropper.y1,0);(i>0||o>0||s>0||a>0)&&(this.cropper.x1+=s*this.aspectRatio>i?s*this.aspectRatio:i,this.cropper.x2-=a*this.aspectRatio>o?a*this.aspectRatio:o,this.cropper.y1+=a*this.aspectRatio>o?a:o/this.aspectRatio,this.cropper.y2-=s*this.aspectRatio>i?s:i/this.aspectRatio)}}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.transformedImage){this.startCropImage.emit();const t=this.getImagePosition(),e=t.x2-t.x1,i=t.y2-t.y1,o=document.createElement("canvas");o.width=e,o.height=i;const s=o.getContext("2d");if(s){null!=this.backgroundColor&&(s.fillStyle=this.backgroundColor,s.fillRect(0,0,e,i));const a=(this.transform.scale||1)*(this.transform.flipH?-1:1),c=(this.transform.scale||1)*(this.transform.flipV?-1:1);s.setTransform(a,0,0,c,this.transformedSize.width/2,this.transformedSize.height/2),s.translate(-t.x1/a,-t.y1/c),s.rotate((this.transform.rotate||0)*Math.PI/180),s.drawImage(this.transformedImage,-this.transformedSize.width/2,-this.transformedSize.height/2);const r={width:e,height:i,imagePosition:t,cropperPosition:Object.assign({},this.cropper)};this.containWithinAspectRatio&&(r.offsetImagePosition=this.getOffsetImagePosition());const n=this.getResizeRatio(e,i);return 1!==n&&(r.width=Math.round(e*n),r.height=this.maintainAspectRatio?Math.round(r.width/this.aspectRatio):Math.round(i*n),function(t,e,i){const o=t.width,s=t.height,a=o/(e=Math.round(e)),c=s/(i=Math.round(i)),r=Math.ceil(a/2),n=Math.ceil(c/2),l=t.getContext("2d");if(l){const h=l.getImageData(0,0,o,s),p=l.createImageData(e,i),d=h.data,u=p.data;for(let t=0;t<i;t++)for(let i=0;i<e;i++){const l=4*(i+t*e),h=t*c;let p=0,m=0,g=0,b=0,f=0,v=0,x=0;const w=Math.floor(i*a),S=Math.floor(t*c);let y=Math.ceil((i+1)*a),C=Math.ceil((t+1)*c);y=Math.min(y,o),C=Math.min(C,s);for(let t=S;t<C;t++){const e=Math.abs(h-t)/n,s=i*a,c=e*e;for(let i=w;i<y;i++){const e=Math.abs(s-i)/r,a=Math.sqrt(c+e*e);if(a>=1)continue;p=2*a*a*a-3*a*a+1;const n=4*(i+t*o);x+=p*d[n+3],g+=p,d[n+3]<255&&(p=p*d[n+3]/250),b+=p*d[n],f+=p*d[n+1],v+=p*d[n+2],m+=p}}u[l]=b/m,u[l+1]=f/m,u[l+2]=v/m,u[l+3]=x/g}t.width=e,t.height=i,l.putImageData(p,0,0)}}(o,r.width,r.height)),r.base64=this.cropToBase64(o),this.imageCropped.emit(r),r}}return null}getImagePosition(){const t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth,e={x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.round(this.cropper.x2*t),y2:Math.round(this.cropper.y2*t)};return this.containWithinAspectRatio||(e.x1=Math.max(e.x1,0),e.y1=Math.max(e.y1,0),e.x2=Math.min(e.x2,this.transformedSize.width),e.y2=Math.min(e.y2,this.transformedSize.height)),e}getOffsetImagePosition(){const t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth;let e,i;(this.canvasRotation+this.exifTransform.rotate)%2?(e=(this.transformedSize.width-this.originalSize.height)/2,i=(this.transformedSize.height-this.originalSize.width)/2):(e=(this.transformedSize.width-this.originalSize.width)/2,i=(this.transformedSize.height-this.originalSize.height)/2);const o={x1:Math.round(this.cropper.x1*t)-e,y1:Math.round(this.cropper.y1*t)-i,x2:Math.round(this.cropper.x2*t)-e,y2:Math.round(this.cropper.y2*t)-i};return this.containWithinAspectRatio||(o.x1=Math.max(o.x1,0),o.y1=Math.max(o.y1,0),o.x2=Math.min(o.x2,this.transformedSize.width),o.y2=Math.min(o.y2,this.transformedSize.height)),o}cropToBase64(t){return t.toDataURL("image/"+this.format,this.getQuality())}getQuality(){return Math.min(1,Math.max(0,this.imageQuality/100))}getResizeRatio(t,e){const i=this.resizeToWidth/t,o=this.resizeToHeight/e,s=new Array;this.resizeToWidth>0&&s.push(i),this.resizeToHeight>0&&s.push(o);const a=0===s.length?1:Math.min(...s);return a>1&&!this.onlyScaleDown?a:Math.min(a,1)}getClientX(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0}getClientY(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(et.b),r.Vb(r.h))},t.\u0275cmp=r.Pb({type:t,selectors:[["image-cropper"]],viewQuery:function(t,e){var i;1&t&&(r.Lc(it,!0),r.Uc(ot,!0)),2&t&&(r.Bc(i=r.kc())&&(e.wrapper=i.first),r.Bc(i=r.kc())&&(e.sourceImage=i.first))},hostVars:4,hostBindings:function(t,e){1&t&&r.jc("resize",(function(t){return e.onResize()}),!1,r.Fc)("mousemove",(function(t){return e.moveImg(t)}),!1,r.Ec)("touchmove",(function(t){return e.moveImg(t)}),!1,r.Ec)("mouseup",(function(t){return e.moveStop()}),!1,r.Ec)("touchend",(function(t){return e.moveStop()}),!1,r.Ec),2&t&&(r.Mc("text-align",e.alignImage),r.Lb("disabled",e.disabled))},inputs:{format:"format",maintainAspectRatio:"maintainAspectRatio",transform:"transform",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",backgroundColor:"backgroundColor"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[r.Eb()],decls:5,vars:10,consts:[["wrapper",""],["class","source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"overlay"],["class","cropper","tabindex","0",3,"rounded","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"cropper",3,"keydown"],[1,"move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(r.bc(0,"div",null,0),r.Nc(2,st,2,5,"img",1),r.Wb(3,"div",2),r.Nc(4,ct,3,15,"div",3),r.ac()),2&t&&(r.Mc("background",e.imageVisible&&e.backgroundColor,r.Ob),r.Gb(2),r.sc("ngIf",e.safeImgDataUrl),r.Gb(1),r.Mc("width",e.maxSize.width,"px")("height",e.maxSize.height,"px")("margin-left","center"===e.alignImage?e.marginLeft:null),r.Gb(1),r.sc("ngIf",e.imageVisible))},directives:[o.l],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color,#fff) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color,rgba(255,255,255,.3)) solid 100vw;touch-action:none}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3);box-shadow:0 0 0 100vw var(--cropper-outline-color,rgba(255,255,255,.3))}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3);box-shadow:0 0 0 100vh var(--cropper-outline-color,rgba(255,255,255,.3))}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),t})(),lt=(()=>{class t{}return t.\u0275mod=r.Tb({type:t}),t.\u0275inj=r.Sb({factory:function(e){return new(e||t)},imports:[[o.c]]}),t})();var ht=i("bv9b");function pt(t,e){if(1&t&&r.Wb(0,"img",20),2&t){const t=r.nc(3);r.sc("src",t.categoreyImage,r.Ic)}}function dt(t,e){if(1&t){const t=r.cc();r.bc(0,"div",15),r.bc(1,"div",16),r.bc(2,"label",17),r.Pc(3),r.ac(),r.bc(4,"input",18),r.jc("change",(function(e){return r.Gc(t),r.nc(2).fileChangeEvent(e)})),r.ac(),r.ac(),r.Nc(5,pt,1,1,"img",19),r.ac()}if(2&t){const t=r.nc(2);r.Gb(3),r.Qc(t.categoreyImage?"Change Image":"Upload Image"),r.Gb(2),r.sc("ngIf",t.categoreyImage)}}function ut(t,e){1&t&&(r.bc(0,"p",21),r.Pc(1," *Please fill all the fields "),r.ac())}function mt(t,e){if(1&t){const t=r.cc();r.bc(0,"form",3),r.jc("ngSubmit",(function(e){return r.Gc(t),r.nc().submit()})),r.bc(1,"div",4),r.bc(2,"div",5),r.bc(3,"mat-form-field",6),r.Wb(4,"input",7),r.ac(),r.ac(),r.bc(5,"div",5),r.bc(6,"mat-form-field",6),r.Wb(7,"input",8),r.ac(),r.ac(),r.Nc(8,dt,6,2,"div",9),r.Nc(9,ut,2,0,"p",10),r.bc(10,"div",11),r.bc(11,"button",12),r.Pc(12),r.oc(13,"translate"),r.ac(),r.Wb(14,"span",13),r.bc(15,"button",14),r.jc("click",(function(e){return r.Gc(t),r.nc().dialogRef.close(!1)})),r.Pc(16," Cancel "),r.ac(),r.ac(),r.ac(),r.ac()}if(2&t){const t=r.nc();r.sc("formGroup",t.itemForm),r.Gb(8),r.sc("ngIf",!(null!=t.data&&t.data.isNew)),r.Gb(1),r.sc("ngIf",t.validationErrors),r.Gb(2),r.sc("disabled",t.itemForm.invalid),r.Gb(1),r.Rc(" ",r.pc(13,5,"SAVE")," ")}}function gt(t,e){1&t&&r.Wb(0,"mat-progress-bar",32)}function bt(t,e){if(1&t&&(r.bc(0,"div"),r.Pc(1," Uploading "),r.Nc(2,gt,1,0,"mat-progress-bar",31),r.ac()),2&t){const t=r.nc(2);r.Gb(2),r.sc("ngIf",t.loader)}}function ft(t,e){if(1&t){const t=r.cc();r.bc(0,"div",22),r.bc(1,"div",23),r.bc(2,"div"),r.bc(3,"image-cropper",24),r.jc("imageCropped",(function(e){return r.Gc(t),r.nc().imageCropped(e)}))("imageLoaded",(function(e){return r.Gc(t),r.nc().imageLoaded()}))("cropperReady",(function(e){return r.Gc(t),r.nc().cropperReady()}))("loadImageFailed",(function(e){return r.Gc(t),r.nc().loadImageFailed()})),r.ac(),r.ac(),r.bc(4,"div"),r.bc(5,"div",25),r.bc(6,"div",26),r.Wb(7,"img",27),r.ac(),r.bc(8,"p",28),r.Pc(9,"Preview"),r.ac(),r.ac(),r.ac(),r.ac(),r.Nc(10,bt,3,1,"div",29),r.bc(11,"div",11),r.bc(12,"button",30),r.jc("click",(function(e){return r.Gc(t),r.nc().fileUpload()})),r.Pc(13," Upload "),r.ac(),r.Wb(14,"span",13),r.bc(15,"button",14),r.jc("click",(function(e){return r.Gc(t),r.nc().cancelFileUpload()})),r.Pc(16," Cancel "),r.ac(),r.ac(),r.ac()}if(2&t){const t=r.nc();r.Gb(3),r.sc("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",350)("cropperMinWidth",1e3),r.Gb(4),r.sc("src",t.croppedImage,r.Ic),r.Gb(3),r.sc("ngIf",t.loader)}}let vt=(()=>{class t{constructor(t,e,i,o,s){this.data=t,this.dialogRef=e,this.fb=i,this.productApiService=o,this.appLoaderService=s,this.imageChangedEvent="",this.croppedImage="",this.loader=!1,this.subscripition=new w.a}ngOnInit(){this.buildItemForm(this.data.payload),this.categoreyImage=this.data.payload.image}buildItemForm(t){this.itemForm=this.fb.group({name:[t.name||"",a.t.required],code:[t.code||"",a.t.required]})}submit(){this.itemForm.value.name=this.itemForm.value.name.trim(),this.itemForm.value.code=this.itemForm.value.code.trim(),this.itemForm.value.code.length>0&&this.itemForm.value.name.length>0?this.dialogRef.close(this.itemForm.value):this.validationErrors=!0}imageCropped(t){this.croppedImage=t.base64}fileChangeEvent(t){this.appLoaderService.open(),this.fileSelected=!0,this.fileName=t.srcElement.files[0].name,this.imageChangedEvent=t}b64toBlob(t){const e=atob(t.split(",")[1]),i=new ArrayBuffer(e.length),o=new Uint8Array(i);for(let s=0;s<e.length;s++)o[s]=e.charCodeAt(s);return new Blob([i],{type:"image/png"})}fileUpload(){this.loader=!0;const t=this.b64toBlob(this.croppedImage),e=new FormData;e.append("file",t,this.fileName),this.productApiService.imageUpload(this.data.payload._id,e).subscribe(t=>{"success"===t.status&&(this.fileSelected=!1,this.loader=!1,this.categoreyImage=this.croppedImage)},t=>{this.loader=!1})}imageLoaded(){}cropperReady(){this.appLoaderService.close()}loadImageFailed(){}cancelFileUpload(){this.fileSelected=!1}ngOnDestroy(){this.subscripition.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.a),r.Vb(c.f),r.Vb(a.c),r.Vb(tt),r.Vb(m.a))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-category-popup"]],decls:4,vars:3,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit",4,"ngIf"],["fxLayout","row wrap",4,"ngIf"],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","50",1,"pr-1"],[1,"full-width","p-b-10"],["matInput","","name","username","formControlName","name","placeholder","Category"],["matInput","","name","username","formControlName","code","placeholder","Category Code"],["fxFlex","50","class","pr-1 image-view-section",4,"ngIf"],["class","error-msg",4,"ngIf"],["fxFlex","100",1,"footer-buttons"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],["fxFlex","50",1,"pr-1","image-view-section"],[1,"p-t-15"],["for","d",1,"_upload_label"],["id","d","type","file",2,"display","none",3,"change"],["class","uploaded-image","alt","Category Image",3,"src",4,"ngIf"],["alt","Category Image",1,"uploaded-image",3,"src"],[1,"error-msg"],["fxLayout","row wrap"],[1,"image-section"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth","cropperMinWidth","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"preview"],[2,"max-width","45%","width","100%","margin","auto"],[3,"src"],[1,"text-center"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(t,e){1&t&&(r.bc(0,"h1",0),r.Pc(1),r.ac(),r.Nc(2,mt,17,7,"form",1),r.Nc(3,ft,17,7,"div",2)),2&t&&(r.Gb(1),r.Qc(e.fileSelected?"Upload Image":e.data.title),r.Gb(1),r.sc("ngIf",!e.fileSelected),r.Gb(1),r.sc("ngIf",e.fileSelected))},directives:[c.g,o.l,a.u,a.o,a.h,n.b,l.b,a.b,a.n,a.f,h.b,nt,ht.a],pipes:[p.c],styles:["._upload_label[_ngcontent-%COMP%]{padding:8px 5px;color:#212121;background:rgba(103,100,139,.1);border:2px dotted #949494;border-radius:5px;text-transform:capitalize}.error-msg[_ngcontent-%COMP%]{color:red}.footer-buttons[_ngcontent-%COMP%]{margin-top:40px}.p-t-15[_ngcontent-%COMP%]{padding-top:15px}.image-section[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;height:320px}.image-view-section[_ngcontent-%COMP%]{display:flex}.uploaded-image[_ngcontent-%COMP%]{width:200px;height:auto;max-width:300px;border:3px solid hsla(0,0%,89%,.4);border-radius:7px;margin-left:10px}"]}),t})(),xt=(()=>{class t{constructor(t,e){this.data=t,this.dialogRef=e}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.a),r.Vb(c.f))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-image-viewer"]],decls:8,vars:2,consts:[[1,"m"],[1,"m-header"],[1,"m-close-x",3,"click"],["matDialogTitle","",1,"m-header-h1"],[1,"m-body"],["alt","image viewer",1,"m-image",3,"src"]],template:function(t,e){1&t&&(r.bc(0,"div",0),r.bc(1,"div",1),r.bc(2,"div",2),r.jc("click",(function(t){return e.dialogRef.close(!1)})),r.Pc(3,"x"),r.ac(),r.bc(4,"h1",3),r.Pc(5),r.ac(),r.ac(),r.bc(6,"div",4),r.Wb(7,"img",5),r.ac(),r.ac()),2&t&&(r.Gb(5),r.Qc(e.data.title),r.Gb(2),r.sc("src",e.data.imageUrl,r.Ic))},directives:[c.g],styles:[".m-body[_ngcontent-%COMP%]{text-align:center;margin:auto auto 10px}.m-header-h1[_ngcontent-%COMP%]{padding:2px 9px}.m-close-x[_ngcontent-%COMP%]{position:absolute;right:8px;cursor:pointer;padding:0 6px;font-size:24px}.m-header[_ngcontent-%COMP%]{position:relative}.m-image[_ngcontent-%COMP%]{padding:0 20px}"]}),t})();function wt(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.name," ")}}function St(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.code," ")}}function yt(t,e){if(1&t){const t=r.cc();r.bc(0,"div",11),r.jc("click",(function(e){r.Gc(t);const i=r.nc().row;return r.nc().openImageViewer(i)})),r.Wb(1,"img",12),r.ac()}if(2&t){const t=r.nc().row;r.Gb(1),r.sc("src",null==t?null:t.image,r.Ic)}}function Ct(t,e){if(1&t&&r.Nc(0,yt,2,1,"div",10),2&t){const t=e.row;r.sc("ngIf",void 0!==(null==t?null:t.image))}}function At(t,e){if(1&t){const t=r.cc();r.bc(0,"mat-slide-toggle",13),r.jc("change",(function(i){r.Gc(t);const o=e.row;return r.nc().statusChange(o,i)})),r.ac()}if(2&t){const t=e.row;r.sc("checked","active"===(null==t?null:t.status))}}function Pt(t,e){if(1&t){const t=r.cc();r.bc(0,"button",14),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().openPopUp(o)})),r.bc(1,"mat-icon"),r.Pc(2,"edit"),r.ac(),r.ac(),r.bc(3,"button",15),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().deleteItem(o)})),r.bc(4,"mat-icon"),r.Pc(5,"delete"),r.ac(),r.ac()}}let It=(()=>{class t{constructor(t,e,i,o,s){this.dialog=t,this.snack=e,this.productApiService=i,this.confirmServive=o,this.loader=s,this.Categorys=[],this.subscripition=new w.a}ngOnInit(){this.loader.open(),this.getCategorys()}getCategorys(){this.subscripition.add(this.productApiService.getCategorys().subscribe(t=>{this.Categorys=[...t.result],this.loader.close()},t=>{this.loader.close()}))}openPopUp(t={},e){this.dialog.open(vt,{width:"520px",disableClose:!0,data:{title:e?"Add New Category":"Update Category",payload:t,isNew:e}}).afterClosed().subscribe(i=>{i?(this.loader.open(),this.subscripition.add(e?this.productApiService.addCategory(i).subscribe(t=>{this.loader.close(),"success"===t.status&&(this.Categorys.push(t.result),this.Categorys=[...this.Categorys],this.snack.open("Category Added!","OK",{duration:4e3}))},t=>{this.loader.close()}):this.productApiService.updateCategory(t._id,i).subscribe(e=>{this.loader.close(),"success"===e.status&&(this.getCategory(t._id,"update"),this.snack.open("Category Updated!","OK",{duration:4e3}))},t=>{this.loader.close()}))):e||this.getCategory(t._id,"update")})}getCategory(t,e){this.subscripition.add(this.productApiService.getCategory(t).subscribe(t=>{"update"===e&&this.Categorys.forEach((e,i)=>{e._id===t.result._id&&(this.Categorys[i]=t.result,this.Categorys=[...this.Categorys])})},t=>{this.loader.close()}))}deleteItem(t){this.subscripition.add(this.confirmServive.confirm({message:`Delete ${t.name}?`}).subscribe(e=>{e&&(this.loader.open(),this.Categorys.forEach((e,i)=>{e._id===t._id&&this.Categorys.splice(i,1)}),this.Categorys=[...this.Categorys],this.productApiService.deleteCategory(t._id).subscribe(t=>{this.loader.close(),"success"===t.status&&this.snack.open("Category deleted!","OK",{duration:4e3})},t=>{this.loader.close()}))}))}statusChange(t,e){this.loader.open(),this.subscripition.add(this.productApiService.updateCategory(t._id,{status:e.checked?"active":"inactive"}).subscribe(e=>{this.loader.close(),"success"===e.status&&(this.getCategory(t._id,"update"),this.snack.open("Status Updated!","OK",{duration:4e3}))},t=>{this.loader.close()}))}openImageViewer(t){this.dialog.open(xt,{width:"auto",disableClose:!0,data:{title:t.name,imageUrl:t.image},panelClass:"modal-image-viewer"}).afterClosed().subscribe(t=>{})}ngOnDestroy(){this.loader.close(),this.subscripition.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.b),r.Vb(S.a),r.Vb(tt),r.Vb(x.a),r.Vb(m.a))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-category"]],decls:18,vars:17,consts:[[1,"m-333"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","limit","rowHeight"],["name","Category",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","Category Code",3,"flexGrow"],["name","Image",3,"flexGrow"],["name","Active",3,"flexGrow"],["name","Actions",3,"flexGrow"],["class","_img_div",3,"click",4,"ngIf"],[1,"_img_div",3,"click"],["title","View",1,"_img",3,"src"],[3,"checked","change"],["mat-icon-button","","mat-sm-button","","color","primary",1,"mr-1",3,"click"],["mat-icon-button","","mat-sm-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(r.bc(0,"div",0),r.bc(1,"button",1),r.jc("click",(function(t){return e.openPopUp({},!0)})),r.Pc(2),r.oc(3,"translate"),r.oc(4,"translate"),r.ac(),r.ac(),r.bc(5,"mat-card",2),r.bc(6,"mat-card-content",2),r.bc(7,"ngx-datatable",3),r.bc(8,"ngx-datatable-column",4),r.Nc(9,wt,1,1,"ng-template",5),r.ac(),r.bc(10,"ngx-datatable-column",6),r.Nc(11,St,1,1,"ng-template",5),r.ac(),r.bc(12,"ngx-datatable-column",7),r.Nc(13,Ct,1,1,"ng-template",5),r.ac(),r.bc(14,"ngx-datatable-column",8),r.Nc(15,At,1,1,"ng-template",5),r.ac(),r.bc(16,"ngx-datatable-column",9),r.Nc(17,Pt,6,0,"ng-template",5),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(2),r.Sc("",r.pc(3,13,"ADD")," ",r.pc(4,15,"Category"),""),r.Gb(5),r.sc("rows",e.Categorys)("columnMode","force")("headerHeight",50)("footerHeight",50)("limit",10)("rowHeight",50),r.Gb(1),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1))},directives:[h.b,y.a,y.b,C.d,C.b,C.a,o.l,A.a,P.a],pipes:[p.c],styles:["._img_div[_ngcontent-%COMP%]{top:2px;position:absolute;max-width:51px;width:51px;cursor:pointer;padding:0 2px}"]}),t})();var Mt=i("wZkO");function _t(t,e){if(1&t&&(r.bc(0,"mat-option",17),r.Pc(1),r.ac()),2&t){const t=e.$implicit;r.sc("value",t._id),r.Gb(1),r.Qc(t.name)}}function Ot(t,e){if(1&t&&r.Wb(0,"img",23),2&t){const t=r.nc(3);r.sc("src",t.productImage,r.Ic)}}function Gt(t,e){if(1&t){const t=r.cc();r.bc(0,"div",18),r.bc(1,"div",19),r.bc(2,"label",20),r.Pc(3),r.ac(),r.bc(4,"input",21),r.jc("change",(function(e){return r.Gc(t),r.nc(2).fileChangeEvent(e)})),r.ac(),r.ac(),r.Nc(5,Ot,1,1,"img",22),r.ac()}if(2&t){const t=r.nc(2);r.Gb(3),r.Qc(t.productImage?"Change Image":"Upload Image"),r.Gb(2),r.sc("ngIf",t.productImage)}}function kt(t,e){1&t&&(r.bc(0,"p",24),r.Pc(1,"*Please fill all the fields"),r.ac())}function Rt(t,e){if(1&t){const t=r.cc();r.bc(0,"form",3),r.jc("ngSubmit",(function(e){return r.Gc(t),r.nc().submit()})),r.bc(1,"div",4),r.bc(2,"div",5),r.bc(3,"mat-form-field",6),r.bc(4,"mat-select",7),r.Nc(5,_t,2,2,"mat-option",8),r.ac(),r.ac(),r.ac(),r.bc(6,"div",5),r.bc(7,"mat-form-field",6),r.Wb(8,"input",9),r.ac(),r.ac(),r.bc(9,"div",5),r.bc(10,"mat-form-field",6),r.Wb(11,"input",10),r.ac(),r.ac(),r.Nc(12,Gt,6,2,"div",11),r.Nc(13,kt,2,0,"p",12),r.bc(14,"div",13),r.bc(15,"button",14),r.Pc(16),r.oc(17,"translate"),r.ac(),r.Wb(18,"span",15),r.bc(19,"button",16),r.jc("click",(function(e){return r.Gc(t),r.nc().dialogRef.close(!1)})),r.Pc(20,"Cancel"),r.ac(),r.ac(),r.ac(),r.ac()}if(2&t){const t=r.nc();r.sc("formGroup",t.itemForm),r.Gb(5),r.sc("ngForOf",t.categories),r.Gb(7),r.sc("ngIf",!(null!=t.data&&t.data.isNew)),r.Gb(1),r.sc("ngIf",t.validationErrors),r.Gb(2),r.sc("disabled",t.itemForm.invalid),r.Gb(1),r.Qc(r.pc(17,6,"SAVE"))}}function Ft(t,e){1&t&&r.Wb(0,"mat-progress-bar",36)}function zt(t,e){if(1&t&&(r.bc(0,"div"),r.Pc(1," Uploading "),r.Nc(2,Ft,1,0,"mat-progress-bar",35),r.ac()),2&t){const t=r.nc(2);r.Gb(2),r.sc("ngIf",t.loader)}}function Et(t,e){if(1&t){const t=r.cc();r.bc(0,"div",25),r.bc(1,"div",26),r.bc(2,"div"),r.bc(3,"image-cropper",27),r.jc("imageCropped",(function(e){return r.Gc(t),r.nc().imageCropped(e)}))("imageLoaded",(function(e){return r.Gc(t),r.nc().imageLoaded()}))("cropperReady",(function(e){return r.Gc(t),r.nc().cropperReady()}))("loadImageFailed",(function(e){return r.Gc(t),r.nc().loadImageFailed()})),r.ac(),r.ac(),r.bc(4,"div"),r.bc(5,"div",28),r.bc(6,"div",29),r.Wb(7,"img",30),r.ac(),r.bc(8,"p",31),r.Pc(9,"Preview"),r.ac(),r.ac(),r.ac(),r.ac(),r.Nc(10,zt,3,1,"div",32),r.bc(11,"div",33),r.bc(12,"button",34),r.jc("click",(function(e){return r.Gc(t),r.nc().fileUpload()})),r.Pc(13," Upload "),r.ac(),r.Wb(14,"span",15),r.bc(15,"button",16),r.jc("click",(function(e){return r.Gc(t),r.nc().cancelFileUpload()})),r.Pc(16," Cancel "),r.ac(),r.ac(),r.ac()}if(2&t){const t=r.nc();r.Gb(3),r.sc("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",350)("cropperMinWidth",1e3),r.Gb(4),r.sc("src",t.croppedImage,r.Ic),r.Gb(3),r.sc("ngIf",t.fileloader)}}let Ut=(()=>{class t{constructor(t,e,i,o,s){this.data=t,this.dialogRef=e,this.fb=i,this.loader=o,this.productApiService=s,this.subscripition=new w.a,this.categories=[],this.imageChangedEvent="",this.croppedImage="",this.fileloader=!1}ngOnInit(){this.loader.open(),this.getCategories(),this.buildItemForm(this.data.payload),this.productImage=this.data.payload.image}getCategories(){this.subscripition.add(this.productApiService.getCategorys().subscribe(t=>{this.categories=t.result,this.loader.close()},t=>{this.loader.close()}))}buildItemForm(t){var e,i;this.itemForm=this.fb.group({category:[(null===(i=null===(e=t)||void 0===e?void 0:e.category)||void 0===i?void 0:i._id)||null,a.t.required],name:[t.name||null,a.t.required],code:[t.code||null,a.t.required]})}submit(){this.itemForm.value.name=this.itemForm.value.name.trim(),this.itemForm.value.code=this.itemForm.value.code.trim(),this.itemForm.value.code.length>0&&this.itemForm.value.name.length>0?this.dialogRef.close(this.itemForm.value):this.validationErrors=!0}imageCropped(t){this.croppedImage=t.base64}fileChangeEvent(t){this.loader.open(),this.fileSelected=!0,this.fileName=t.srcElement.files[0].name,this.imageChangedEvent=t}b64toBlob(t){const e=atob(t.split(",")[1]),i=new ArrayBuffer(e.length),o=new Uint8Array(i);for(let s=0;s<e.length;s++)o[s]=e.charCodeAt(s);return new Blob([i],{type:"image/png"})}fileUpload(){this.fileloader=!0;const t=this.b64toBlob(this.croppedImage),e=new FormData;e.append("file",t,this.fileName),this.productApiService.productImageUpload(this.data.payload._id,e).subscribe(t=>{"success"===t.status&&(this.fileSelected=!1,this.fileloader=!1,this.productImage=this.croppedImage)},t=>{this.fileloader=!1})}imageLoaded(){}cropperReady(){this.loader.close()}loadImageFailed(){}cancelFileUpload(){this.fileSelected=!1}ngOnDestroy(){this.loader.close(),this.subscripition.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.a),r.Vb(c.f),r.Vb(a.c),r.Vb(m.a),r.Vb(tt))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-product-popup"]],decls:4,vars:3,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit",4,"ngIf"],["fxLayout","row wrap",4,"ngIf"],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","50",1,"pr-1"],[1,"full-width","p-b-10"],["placeholder","Select Category","name","category","formControlName","category",1,"full-width","state-box"],["ngDefaultControl","",3,"value",4,"ngFor","ngForOf"],["matInput","","name","username","formControlName","name","placeholder","Product"],["matInput","","name","username","formControlName","code","placeholder","Product Code"],["fxFlex","50","class","pr-1 image-view-section",4,"ngIf"],["class","error-msg",4,"ngIf"],["fxFlex","100",1,"mt-1"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],["ngDefaultControl","",3,"value"],["fxFlex","50",1,"pr-1","image-view-section"],[1,"p-t-15"],["for","d",1,"_upload_label"],["id","d","type","file",2,"display","none",3,"change"],["class","uploaded-image","alt","Category Image",3,"src",4,"ngIf"],["alt","Category Image",1,"uploaded-image",3,"src"],[1,"error-msg"],["fxLayout","row wrap"],[1,"image-section"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth","cropperMinWidth","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"preview"],[2,"max-width","45%","width","100%","margin","auto"],[3,"src"],[1,"text-center"],[4,"ngIf"],["fxFlex","100",1,"footer-buttons"],["mat-raised-button","","color","primary",3,"click"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(t,e){1&t&&(r.bc(0,"h1",0),r.Pc(1),r.ac(),r.Nc(2,Rt,21,8,"form",1),r.Nc(3,Et,17,7,"div",2)),2&t&&(r.Gb(1),r.Qc(e.fileSelected?"Upload Image":e.data.title),r.Gb(1),r.sc("ngIf",!e.fileSelected),r.Gb(1),r.sc("ngIf",e.fileSelected))},directives:[c.g,o.l,a.u,a.o,a.h,n.b,k.a,a.n,a.f,o.k,l.b,a.b,h.b,R.p,nt,ht.a],pipes:[p.c],styles:["._upload_label[_ngcontent-%COMP%]{padding:8px 5px;color:#212121;background:rgba(103,100,139,.1);border:2px dotted #949494;border-radius:5px;text-transform:capitalize}.error-msg[_ngcontent-%COMP%]{color:red}.footer-buttons[_ngcontent-%COMP%]{margin-top:40px}.p-t-15[_ngcontent-%COMP%]{padding-top:15px}.image-section[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;height:320px}.image-view-section[_ngcontent-%COMP%]{display:flex}.uploaded-image[_ngcontent-%COMP%]{width:200px;height:auto;max-width:300px;border:3px solid hsla(0,0%,89%,.4);border-radius:7px;margin-left:10px}"]}),t})();function Dt(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.name," ")}}function Vt(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.code," ")}}function Tt(t,e){if(1&t){const t=r.cc();r.bc(0,"div",11),r.jc("click",(function(e){r.Gc(t);const i=r.nc().row;return r.nc().openImageViewer(i)})),r.Wb(1,"img",12),r.ac()}if(2&t){const t=r.nc().row;r.Gb(1),r.sc("src",null==t?null:t.image,r.Ic)}}function Wt(t,e){if(1&t&&r.Nc(0,Tt,2,1,"div",10),2&t){const t=e.row;r.sc("ngIf",void 0!==(null==t?null:t.image))}}function jt(t,e){if(1&t){const t=r.cc();r.bc(0,"mat-slide-toggle",13),r.jc("change",(function(i){r.Gc(t);const o=e.row;return r.nc().statusChange(o,i)})),r.ac()}if(2&t){const t=e.row;r.sc("checked","active"===(null==t?null:t.status))}}function Ht(t,e){if(1&t){const t=r.cc();r.bc(0,"button",14),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().openPopUp(o)})),r.bc(1,"mat-icon"),r.Pc(2,"edit"),r.ac(),r.ac(),r.bc(3,"button",15),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().deleteItem(o)})),r.bc(4,"mat-icon"),r.Pc(5,"delete"),r.ac(),r.ac()}}let Nt=(()=>{class t{constructor(t,e,i,o,s){this.dialog=t,this.snack=e,this.loader=i,this.confirmService=o,this.productApiService=s,this.products=[],this.subscripition=new w.a}ngOnInit(){this.loader.open(),this.getAllProducts()}getAllProducts(){this.subscripition.add(this.productApiService.getAllProducts().subscribe(t=>{this.products=[...t.result],this.loader.close()},t=>{this.loader.close()}))}closeLoader(){this.loader.close()}openPopUp(t={},e){this.dialog.open(Ut,{width:"520px",disableClose:!0,data:{title:e?"Add New Product":"Update Product",payload:t,isNew:e}}).afterClosed().subscribe(i=>{i?(this.loader.open(),this.subscripition.add(e?this.productApiService.addProduct(i).subscribe(t=>{this.loader.close(),"success"===t.status&&(this.getProduct(t.result._id,"add"),this.snack.open("Product Added!","OK",{duration:4e3}))},t=>{this.loader.close()}):this.productApiService.updateProduct(t._id,i).subscribe(t=>{this.loader.close(),"success"===t.status&&(this.getProduct(t.result._id,"update"),this.snack.open("Product Updated!","OK",{duration:4e3}))},t=>{this.loader.close()}))):e||this.getProduct(t._id,"update")})}getProduct(t,e){this.subscripition.add(this.productApiService.getProduct(t).subscribe(t=>{"add"===e?(this.products.push(t.result),this.products=[...this.products]):this.products.forEach((e,i)=>{e._id===t.result._id&&(this.products[i]=t.result,this.products=[...this.products])})},t=>{this.loader.close()}))}deleteItem(t){this.subscripition.add(this.confirmService.confirm({message:`Delete ${t.name}?`}).subscribe(e=>{e&&(this.loader.open(),this.products.forEach((e,i)=>{e._id===t._id&&this.products.splice(i,1)}),this.products=[...this.products],this.productApiService.deleteProduct(t._id).subscribe(t=>{this.loader.close(),"success"===t.status&&this.snack.open("Product deleted!","OK",{duration:4e3})}))},t=>{this.loader.close()}))}statusChange(t,e){this.loader.open(),this.subscripition.add(this.productApiService.updateProduct(t._id,{status:e.checked?"active":"inactive"}).subscribe(e=>{this.loader.close(),"success"===e.status&&(this.getProduct(t._id,"update"),this.snack.open("Status Updated!","OK",{duration:4e3}))},t=>{this.loader.close()}))}openImageViewer(t){this.dialog.open(xt,{width:"auto",disableClose:!0,data:{title:t.name,imageUrl:t.image},panelClass:"modal-image-viewer"}).afterClosed().subscribe(t=>{})}ngOnDestroy(){this.subscripition.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.b),r.Vb(S.a),r.Vb(m.a),r.Vb(x.a),r.Vb(tt))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-product"]],decls:18,vars:18,consts:[[1,"m-333"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","limit","rowHeight"],["name","Name",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","Product Code",3,"flexGrow"],["name","Image",3,"flexGrow"],["name","Active",3,"flexGrow"],["name","Actions",3,"flexGrow"],["class","_img_div",3,"click",4,"ngIf"],[1,"_img_div",3,"click"],["title","View",1,"_img",3,"src"],[3,"checked","change"],["mat-icon-button","","mat-sm-button","","color","primary",1,"mr-1",3,"click"],["mat-icon-button","","mat-sm-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(r.bc(0,"div",0),r.bc(1,"button",1),r.jc("click",(function(t){return e.openPopUp({},!0)})),r.Pc(2),r.oc(3,"translate"),r.oc(4,"translate"),r.ac(),r.ac(),r.bc(5,"mat-card",2),r.bc(6,"mat-card-content",2),r.bc(7,"ngx-datatable",3),r.bc(8,"ngx-datatable-column",4),r.Nc(9,Dt,1,1,"ng-template",5),r.ac(),r.bc(10,"ngx-datatable-column",6),r.Nc(11,Vt,1,1,"ng-template",5),r.ac(),r.bc(12,"ngx-datatable-column",7),r.Nc(13,Wt,1,1,"ng-template",5),r.ac(),r.bc(14,"ngx-datatable-column",8),r.Nc(15,jt,1,1,"ng-template",5),r.ac(),r.bc(16,"ngx-datatable-column",9),r.Nc(17,Ht,6,0,"ng-template",5),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(2),r.Sc(" ",r.pc(3,14,"ADD")," ",r.pc(4,16,"Product")," "),r.Gb(5),r.sc("rows",e.products)("columnMode","force")("headerHeight",50)("footerHeight",50)("scrollbarH",!0)("limit",10)("rowHeight",50),r.Gb(1),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1))},directives:[h.b,y.a,y.b,C.d,C.b,C.a,o.l,A.a,P.a],pipes:[p.c],styles:["._img_div[_ngcontent-%COMP%]{top:2px;position:absolute;max-width:51px;width:51px;cursor:pointer;padding:0 2px}"]}),t})();function Lt(t,e){1&t&&(r.bc(0,"p",16),r.Pc(1,"*Please fill all the fields"),r.ac())}let Bt=(()=>{class t{constructor(t,e,i,o,s){this.data=t,this.dialogRef=e,this.fb=i,this.loader=o,this.productApiService=s,this.subscripition=new w.a,this.categories=[],this.format="integer"}ngOnInit(){this.buildAttributeForm(this.data.payload)}buildAttributeForm(t){this.format=t.format?t.format:"integer",this.itemForm=this.fb.group({name:[t.name||null,a.t.required],length:[t.length||null,a.t.required],format:[null]})}submit(){this.itemForm.value.format=this.format,this.itemForm.value.name=this.itemForm.value.name.trim(),console.log(this.itemForm.value),this.itemForm.value.name.length>0?this.dialogRef.close(this.itemForm.value):this.validationErrors=!0}ngOnDestroy(){this.loader.close(),this.subscripition.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.a),r.Vb(c.f),r.Vb(a.c),r.Vb(m.a),r.Vb(tt))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-attributes-popup"]],decls:29,vars:8,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","50",1,"pr-1"],[1,"full-width","p-b-10"],["matInput","","name","name","formControlName","name","placeholder","Name"],[3,"value","valueChange"],["value","integer"],["value","decimal"],["value","text"],["matInput","","name","length","formControlName","length","placeholder","Length",3,"keydown.space"],["class","error-msg",4,"ngIf"],["fxFlex","100",1,"mt-1"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],[1,"error-msg"]],template:function(t,e){1&t&&(r.bc(0,"h1",0),r.Pc(1),r.ac(),r.bc(2,"form",1),r.jc("ngSubmit",(function(t){return e.submit()})),r.bc(3,"div",2),r.bc(4,"div",3),r.bc(5,"mat-form-field",4),r.Wb(6,"input",5),r.ac(),r.ac(),r.bc(7,"div",3),r.bc(8,"mat-form-field",4),r.bc(9,"mat-label"),r.Pc(10,"Format"),r.ac(),r.bc(11,"mat-select",6),r.jc("valueChange",(function(t){return e.format=t})),r.bc(12,"mat-option",7),r.Pc(13,"Integer"),r.ac(),r.bc(14,"mat-option",8),r.Pc(15,"Decimal"),r.ac(),r.bc(16,"mat-option",9),r.Pc(17,"Text"),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(18,"div",3),r.bc(19,"mat-form-field",4),r.bc(20,"input",10),r.jc("keydown.space",(function(t){return t.preventDefault()})),r.ac(),r.ac(),r.ac(),r.Nc(21,Lt,2,0,"p",11),r.bc(22,"div",12),r.bc(23,"button",13),r.Pc(24),r.oc(25,"translate"),r.ac(),r.Wb(26,"span",14),r.bc(27,"button",15),r.jc("click",(function(t){return e.dialogRef.close(!1)})),r.Pc(28,"Cancel"),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(1),r.Qc(e.data.title),r.Gb(1),r.sc("formGroup",e.itemForm),r.Gb(9),r.sc("value",e.format),r.Gb(10),r.sc("ngIf",e.validationErrors),r.Gb(2),r.sc("disabled",e.itemForm.invalid),r.Gb(1),r.Qc(r.pc(25,6,"SAVE")))},directives:[c.g,a.u,a.o,a.h,n.b,l.b,a.b,a.n,a.f,n.e,k.a,R.p,o.l,h.b],pipes:[p.c],styles:[""]}),t})();function Qt(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.name," ")}}function Kt(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.format," ")}}function qt(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.length," ")}}function Xt(t,e){if(1&t){const t=r.cc();r.bc(0,"mat-slide-toggle",10),r.jc("change",(function(i){r.Gc(t);const o=e.row;return r.nc().statusChange(o,i)})),r.ac()}if(2&t){const t=e.row;r.sc("checked","active"===(null==t?null:t.status))}}function Yt(t,e){if(1&t){const t=r.cc();r.bc(0,"button",11),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().openPopUp(o)})),r.bc(1,"mat-icon"),r.Pc(2,"edit"),r.ac(),r.ac(),r.bc(3,"button",12),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().deleteItem(o)})),r.bc(4,"mat-icon"),r.Pc(5,"delete"),r.ac(),r.ac()}}let $t=(()=>{class t{constructor(t,e,i,o,s){this.dialog=t,this.snack=e,this.loader=i,this.confirmService=o,this.productApiService=s,this.attributes=[],this.subscripition=new w.a}ngOnInit(){this.getAllProducts()}getAllProducts(){this.subscripition.add(this.productApiService.getAllAttribute().subscribe(t=>{this.attributes=[...t.result],this.loader.close()},t=>{this.loader.close()}))}closeLoader(){this.loader.close()}openPopUp(t={},e){this.dialog.open(Bt,{width:"520px",disableClose:!0,data:{title:e?"Add Attribute":"Update Attribute",payload:t}}).afterClosed().subscribe(i=>{i&&(this.loader.open(),this.subscripition.add(e?this.productApiService.addAttribute(i).subscribe(t=>{this.loader.close(),"success"===t.status&&(this.getAttributes(t.result._id,"add"),this.snack.open("Attribute Added!","OK",{duration:4e3}))},t=>{this.loader.close()}):this.productApiService.updateAttribute(t._id,i).subscribe(t=>{this.loader.close(),"success"===t.status&&(this.getAttributes(t.result._id,"update"),this.snack.open("Attribute Updated!","OK",{duration:4e3}))},t=>{this.loader.close()})))})}getAttributes(t,e){this.subscripition.add(this.productApiService.getAttribute(t).subscribe(t=>{"add"===e?(this.attributes.push(t.result),this.attributes=[...this.attributes]):this.attributes.forEach((e,i)=>{e._id===t.result._id&&(this.attributes[i]=t.result,this.attributes=[...this.attributes])})},t=>{this.loader.close()}))}deleteItem(t){this.subscripition.add(this.confirmService.confirm({message:`Delete ${t.name}?`}).subscribe(e=>{e&&(this.loader.open(),this.attributes.forEach((e,i)=>{e._id===t._id&&this.attributes.splice(i,1)}),this.attributes=[...this.attributes],this.productApiService.deleteAttribute(t._id).subscribe(t=>{this.loader.close(),"success"===t.status&&this.snack.open("Product deleted!","OK",{duration:4e3})}))},t=>{this.loader.close()}))}statusChange(t,e){this.loader.open(),this.subscripition.add(this.productApiService.updateAttribute(t._id,{status:e.checked?"active":"inactive"}).subscribe(e=>{this.loader.close(),"success"===e.status&&(this.getAttributes(t._id,"update"),this.snack.open("Status Updated!","OK",{duration:4e3}))},t=>{this.loader.close()}))}ngOnDestroy(){this.subscripition.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.b),r.Vb(S.a),r.Vb(m.a),r.Vb(x.a),r.Vb(tt))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-attributes"]],decls:18,vars:18,consts:[[1,"m-333"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","limit","rowHeight"],["name","Name",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","Format",3,"flexGrow"],["name","Length",3,"flexGrow"],["name","Active",3,"flexGrow"],["name","Actions",3,"flexGrow"],[3,"checked","change"],["mat-icon-button","","mat-sm-button","","color","primary",1,"mr-1",3,"click"],["mat-icon-button","","mat-sm-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(r.bc(0,"div",0),r.bc(1,"button",1),r.jc("click",(function(t){return e.openPopUp({},!0)})),r.Pc(2),r.oc(3,"translate"),r.oc(4,"translate"),r.ac(),r.ac(),r.bc(5,"mat-card",2),r.bc(6,"mat-card-content",2),r.bc(7,"ngx-datatable",3),r.bc(8,"ngx-datatable-column",4),r.Nc(9,Qt,1,1,"ng-template",5),r.ac(),r.bc(10,"ngx-datatable-column",6),r.Nc(11,Kt,1,1,"ng-template",5),r.ac(),r.bc(12,"ngx-datatable-column",7),r.Nc(13,qt,1,1,"ng-template",5),r.ac(),r.bc(14,"ngx-datatable-column",8),r.Nc(15,Xt,1,1,"ng-template",5),r.ac(),r.bc(16,"ngx-datatable-column",9),r.Nc(17,Yt,6,0,"ng-template",5),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(2),r.Sc(" ",r.pc(3,14,"ADD")," ",r.pc(4,16,"Attribute")," "),r.Gb(5),r.sc("rows",e.attributes)("columnMode","force")("headerHeight",50)("footerHeight",50)("scrollbarH",!0)("limit",10)("rowHeight",50),r.Gb(1),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1))},directives:[h.b,y.a,y.b,C.d,C.b,C.a,A.a,P.a],pipes:[p.c],styles:[""]}),t})();var Jt=i("jtHE"),Zt=i("XNiG"),te=i("1G5W"),ee=i("FtGj"),ie=i("2Vo4"),oe=i("itXk"),se=i("pLZG"),ae=i("eIep"),ce=i("JX91"),re=i("lJxs"),ne=i("3E0/"),le=i("IzEk"),he=i("vkgz"),pe=i("bSwM"),de=i("Xa2L"),ue=i("Qu3c"),me=i("vxfF"),ge=i("u47x");const be=["searchSelectInput"],fe=["innerSelectSearch"];function ve(t,e){if(1&t){const t=r.cc();r.bc(0,"mat-checkbox",9),r.jc("change",(function(e){return r.Gc(t),r.nc()._emitSelectAllBooleanToParent(e.checked)})),r.ac()}if(2&t){const t=r.nc();r.sc("color",null==t.matFormField?null:t.matFormField.color)("checked",t.toggleAllCheckboxChecked)("indeterminate",t.toggleAllCheckboxIndeterminate)("matTooltip",t.toggleAllCheckboxTooltipMessage)("matTooltipPosition",t.toogleAllCheckboxTooltipPosition)}}function xe(t,e){1&t&&r.Wb(0,"mat-spinner",10)}function we(t,e){1&t&&r.qc(0,1,["*ngIf","clearIcon; else defaultIcon"])}function Se(t,e){1&t&&(r.bc(0,"mat-icon"),r.Pc(1,"close"),r.ac())}function ye(t,e){if(1&t){const t=r.cc();r.bc(0,"button",11),r.jc("click",(function(e){return r.Gc(t),r.nc()._reset(!0)})),r.Nc(1,we,1,0,void 0,12),r.Nc(2,Se,2,0,"ng-template",null,13,r.Oc),r.ac()}if(2&t){const t=r.Cc(3),e=r.nc();r.Gb(1),r.sc("ngIf",e.clearIcon)("ngIfElse",t)}}function Ce(t,e){if(1&t&&(r.bc(0,"div",14),r.Pc(1),r.ac()),2&t){const t=r.nc();r.Gb(1),r.Rc(" ",t.noEntriesFoundLabel,"\n")}}const Ae=[[["",8,"mat-select-search-custom-header-content"]],[["","ngxMatSelectSearchClear",""]]],Pe=function(t,e){return{"mat-select-search-inner-multiple":t,"mat-select-search-inner-toggle-all":e}},Ie=[".mat-select-search-custom-header-content","[ngxMatSelectSearchClear]"];let Me=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Qb({type:t,selectors:[["","ngxMatSelectSearchClear",""]]}),t})();var _e;let Oe=(()=>{let t=_e=class{constructor(t,e,i,o=null,s,c=null){this.matSelect=t,this.changeDetectorRef=e,this._viewportRuler=i,this.matOption=o,this.liveAnnouncer=s,this.matFormField=c,this.placeholderLabel="Suche",this.type="text",this.noEntriesFoundLabel="Keine Optionen gefunden",this.indexAndLengthScreenReaderText=" of ",this.clearSearchInput=!0,this.searching=!1,this.disableInitialFocus=!1,this.enableClearOnEscapePressed=!1,this.preventHomeEndKeyPropagation=!1,this.disableScrollToActiveOnOptionsChanged=!1,this.ariaLabel="dropdown search",this.showToggleAllCheckbox=!1,this.toggleAllCheckboxChecked=!1,this.toggleAllCheckboxIndeterminate=!1,this.toggleAllCheckboxTooltipMessage="",this.toogleAllCheckboxTooltipPosition="below",this.toggleAll=new r.o,this.onTouched=t=>{},this._options$=new ie.a(null),this._formControl=new a.d(""),this._showNoEntriesFound$=Object(oe.a)([this._formControl.valueChanges,this._options$.pipe(Object(se.a)(t=>!!t),Object(ae.a)(t=>t.changes.pipe(Object(ce.a)(t.toArray()),Object(re.a)(t=>t.length))))]).pipe(Object(re.a)(([t,e])=>this.noEntriesFoundLabel&&t&&e===this.getOptionsLengthOffset())),this._onDestroy=new Zt.a}get isInsideMatOption(){return!!this.matOption}get value(){return this._formControl.value}set _options(t){this._options$.next(t)}get _options(){return this._options$.getValue()}ngOnInit(){const t="mat-select-search-panel";this.matSelect.panelClass?Array.isArray(this.matSelect.panelClass)?this.matSelect.panelClass.push(t):"string"==typeof this.matSelect.panelClass?this.matSelect.panelClass=[this.matSelect.panelClass,t]:"object"==typeof this.matSelect.panelClass&&(this.matSelect.panelClass[t]=!0):this.matSelect.panelClass=t,this.matOption?(this.matOption.disabled=!0,this.matOption._getHostElement().classList.add("contains-mat-select-search")):console.error("<ngx-mat-select-search> must be placed inside a <mat-option> element"),this.matSelect.openedChange.pipe(Object(ne.a)(1),Object(te.a)(this._onDestroy)).subscribe(t=>{t?(this.updateInputWidth(),this.disableInitialFocus||this._focus()):this.clearSearchInput&&this._reset()}),this.matSelect.openedChange.pipe(Object(le.a)(1)).pipe(Object(te.a)(this._onDestroy)).subscribe(()=>{this.matSelect._keyManager?this.matSelect._keyManager.change.pipe(Object(te.a)(this._onDestroy)).subscribe(()=>this.adjustScrollTopToFitActiveOptionIntoView()):console.log("_keyManager was not initialized."),this._options=this.matSelect.options;let t=this._options.toArray()[this.getOptionsLengthOffset()];this._options.changes.pipe(Object(te.a)(this._onDestroy)).subscribe(()=>{const e=this._options.toArray(),i=this.matSelect._keyManager;i&&this.matSelect.panelOpen&&setTimeout(()=>{const o=e[this.getOptionsLengthOffset()];!this.matSelect.compareWith(t,o)&&i.setFirstItemActive(),t=o,setTimeout(()=>{this.updateInputWidth()}),this.disableScrollToActiveOnOptionsChanged||this.adjustScrollTopToFitActiveOptionIntoView()},1)})}),this._showNoEntriesFound$.pipe(Object(te.a)(this._onDestroy)).subscribe(t=>{this.matOption&&(t?this.matOption._getHostElement().classList.add("mat-select-search-no-entries-found"):this.matOption._getHostElement().classList.remove("mat-select-search-no-entries-found"))}),this._viewportRuler.change().pipe(Object(te.a)(this._onDestroy)).subscribe(()=>{this.matSelect.panelOpen&&this.updateInputWidth()}),this.initMultipleHandling(),this._options$.pipe(Object(se.a)(t=>!!t),Object(ae.a)(t=>t.changes),Object(te.a)(this._onDestroy)).subscribe(()=>{this.changeDetectorRef.markForCheck()})}_emitSelectAllBooleanToParent(t){this.toggleAll.emit(t)}ngOnDestroy(){this._onDestroy.next(),this._onDestroy.complete()}_isToggleAllCheckboxVisible(){return this.matSelect.multiple&&this.showToggleAllCheckbox}_handleKeydown(t){(t.key&&1===t.key.length||t.keyCode>=ee.a&&t.keyCode<=ee.q||t.keyCode>=ee.r&&t.keyCode<=ee.j||t.keyCode===ee.n||this.preventHomeEndKeyPropagation&&(t.keyCode===ee.h||t.keyCode===ee.e))&&t.stopPropagation(),!0===this.enableClearOnEscapePressed&&t.keyCode===ee.g&&this.value&&(this._reset(!0),t.stopPropagation())}_handleKeyup(t){if(t.keyCode===ee.p||t.keyCode===ee.d){const t=this.matSelect._getAriaActiveDescendant(),e=this._options.toArray().findIndex(e=>e.id===t);if(-1!==e){const t=this._options.toArray()[e];this.liveAnnouncer.announce(t.viewValue+" "+this.getAriaIndex(e)+this.indexAndLengthScreenReaderText+this.getAriaLength())}}}getAriaIndex(t){return 0===this.getOptionsLengthOffset()?t+1:t}getAriaLength(){return this._options.toArray().length-this.getOptionsLengthOffset()}writeValue(t){this._lastExternalInputValue=t,this._formControl.setValue(t),this.changeDetectorRef.markForCheck()}onBlur(){this.onTouched()}registerOnChange(t){this._formControl.valueChanges.pipe(Object(se.a)(t=>t!==this._lastExternalInputValue),Object(he.a)(()=>this._lastExternalInputValue=void 0),Object(te.a)(this._onDestroy)).subscribe(t)}registerOnTouched(t){this.onTouched=t}_focus(){if(!this.searchSelectInput||!this.matSelect.panel)return;const t=this.matSelect.panel.nativeElement,e=t.scrollTop;this.searchSelectInput.nativeElement.focus(),t.scrollTop=e}_reset(t){this._formControl.setValue(""),t&&this._focus()}initMultipleHandling(){this.matSelect.valueChange.pipe(Object(te.a)(this._onDestroy)).subscribe(t=>{if(this.matSelect.multiple){let e=!1;if(this._formControl.value&&this._formControl.value.length&&this.previousSelectedValues&&Array.isArray(this.previousSelectedValues)){t&&Array.isArray(t)||(t=[]);const i=this.matSelect.options.map(t=>t.value);this.previousSelectedValues.forEach(o=>{t.some(t=>this.matSelect.compareWith(t,o))||i.some(t=>this.matSelect.compareWith(t,o))||(t.push(o),e=!0)})}e&&this.matSelect._onChange(t),this.previousSelectedValues=t}}),this.initMultiSelectedValues()}adjustScrollTopToFitActiveOptionIntoView(){if(this.matSelect.panel&&this.matSelect.options.length>0){const t=this.getMatOptionHeight(),e=this.matSelect._keyManager.activeItemIndex||0,i=Object(R.x)(e,this.matSelect.options,this.matSelect.optionGroups),o=(this.matOption?-1:0)+i+e,s=this.matSelect.panel.nativeElement.scrollTop,a=this.innerSelectSearch.nativeElement.offsetHeight,c=Math.floor((k.c-a)/t),r=Math.round((s+a)/t)-1;r>=o?this.matSelect.panel.nativeElement.scrollTop=o*t:r+c<=o&&(this.matSelect.panel.nativeElement.scrollTop=(o+1)*t-(k.c-a))}}updateInputWidth(){if(!this.innerSelectSearch||!this.innerSelectSearch.nativeElement)return;let t,e=this.innerSelectSearch.nativeElement;for(;e=e.parentElement;)if(e.classList.contains("mat-select-panel")){t=e;break}t&&(this.innerSelectSearch.nativeElement.style.width=t.clientWidth+"px")}getMatOptionHeight(){return this.matSelect.options.length>0?this.matSelect.options.first._getHostElement().getBoundingClientRect().height:0}initMultiSelectedValues(){Object(oe.a)([this._formControl.valueChanges.pipe(Object(ce.a)(this._formControl.value)),this._options$.pipe(Object(se.a)(t=>!!t))]).pipe(Object(te.a)(this._onDestroy)).subscribe(([t,e])=>{this.matSelect.multiple&&!t&&(this.previousSelectedValues=e.filter(t=>t.selected).map(t=>t.value))})}getOptionsLengthOffset(){return this.matOption?1:0}};return t.\u0275fac=function(e){return new(e||t)(r.Vb(k.a),r.Vb(r.h),r.Vb(me.d),r.Vb(R.p,8),r.Vb(ge.k),r.Vb(n.b,8))},t.\u0275cmp=r.Pb({type:t,selectors:[["ngx-mat-select-search"]],contentQueries:function(t,e,i){var o;1&t&&r.Nb(i,Me,!0),2&t&&r.Bc(o=r.kc())&&(e.clearIcon=o.first)},viewQuery:function(t,e){var i;1&t&&(r.Lc(be,!0,r.l),r.Lc(fe,!0,r.l)),2&t&&(r.Bc(i=r.kc())&&(e.searchSelectInput=i.first),r.Bc(i=r.kc())&&(e.innerSelectSearch=i.first))},hostVars:2,hostBindings:function(t,e){2&t&&r.Lb("mat-select-search-inside-mat-option",e.isInsideMatOption)},inputs:{placeholderLabel:"placeholderLabel",type:"type",noEntriesFoundLabel:"noEntriesFoundLabel",indexAndLengthScreenReaderText:"indexAndLengthScreenReaderText",clearSearchInput:"clearSearchInput",searching:"searching",disableInitialFocus:"disableInitialFocus",enableClearOnEscapePressed:"enableClearOnEscapePressed",preventHomeEndKeyPropagation:"preventHomeEndKeyPropagation",disableScrollToActiveOnOptionsChanged:"disableScrollToActiveOnOptionsChanged",ariaLabel:"ariaLabel",showToggleAllCheckbox:"showToggleAllCheckbox",toggleAllCheckboxChecked:"toggleAllCheckboxChecked",toggleAllCheckboxIndeterminate:"toggleAllCheckboxIndeterminate",toggleAllCheckboxTooltipMessage:"toggleAllCheckboxTooltipMessage",toogleAllCheckboxTooltipPosition:"toogleAllCheckboxTooltipPosition"},outputs:{toggleAll:"toggleAll"},features:[r.Fb([{provide:a.l,useExisting:Object(r.X)(()=>_e),multi:!0}])],ngContentSelectors:Ie,decls:11,vars:14,consts:[["matInput","",1,"mat-select-search-input","mat-select-search-hidden"],[1,"mat-select-search-inner","mat-typography","mat-datepicker-content","mat-tab-header",3,"ngClass"],["innerSelectSearch",""],["class","mat-select-search-toggle-all-checkbox","matTooltipClass","ngx-mat-select-search-toggle-all-tooltip",3,"color","checked","indeterminate","matTooltip","matTooltipPosition","change",4,"ngIf"],["matInput","","autocomplete","off",1,"mat-select-search-input",3,"type","formControl","placeholder","keydown","keyup","blur"],["searchSelectInput",""],["class","mat-select-search-spinner","diameter","16",4,"ngIf"],["mat-button","","mat-icon-button","","aria-label","Clear","class","mat-select-search-clear",3,"click",4,"ngIf"],["class","mat-select-search-no-entries-found",4,"ngIf"],["matTooltipClass","ngx-mat-select-search-toggle-all-tooltip",1,"mat-select-search-toggle-all-checkbox",3,"color","checked","indeterminate","matTooltip","matTooltipPosition","change"],["diameter","16",1,"mat-select-search-spinner"],["mat-button","","mat-icon-button","","aria-label","Clear",1,"mat-select-search-clear",3,"click"],[4,"ngIf","ngIfElse"],["defaultIcon",""],[1,"mat-select-search-no-entries-found"]],template:function(t,e){1&t&&(r.rc(Ae),r.Wb(0,"input",0),r.bc(1,"div",1,2),r.Nc(3,ve,1,5,"mat-checkbox",3),r.bc(4,"input",4,5),r.jc("keydown",(function(t){return e._handleKeydown(t)}))("keyup",(function(t){return e._handleKeyup(t)}))("blur",(function(t){return e.onBlur()})),r.ac(),r.Nc(6,xe,1,0,"mat-spinner",6),r.Nc(7,ye,4,2,"button",7),r.qc(8),r.ac(),r.Nc(9,Ce,2,1,"div",8),r.oc(10,"async")),2&t&&(r.Gb(1),r.sc("ngClass",r.yc(11,Pe,e.matSelect.multiple,e._isToggleAllCheckboxVisible())),r.Gb(2),r.sc("ngIf",e._isToggleAllCheckboxVisible()),r.Gb(1),r.sc("type",e.type)("formControl",e._formControl)("placeholder",e.placeholderLabel),r.Hb("aria-label",e.ariaLabel),r.Gb(2),r.sc("ngIf",e.searching),r.Gb(1),r.sc("ngIf",e.value&&!e.searching),r.Gb(2),r.sc("ngIf",r.pc(10,9,e._showNoEntriesFound$)))},directives:[l.b,o.j,o.l,a.b,a.n,a.e,pe.a,ue.a,de.b,h.b,P.a],pipes:[o.b],styles:[".mat-select-search-hidden[_ngcontent-%COMP%]{visibility:hidden}.mat-select-search-inner[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;border-bottom-width:1px;border-bottom-style:solid;z-index:100;font-size:inherit;box-shadow:none;border-radius:4px 4px 0 0;-webkit-transform:translate3d(0,0,0)}.mat-select-search-inner.mat-select-search-inner-multiple[_ngcontent-%COMP%]{width:100%}.mat-select-search-inner.mat-select-search-inner-multiple.mat-select-search-inner-toggle-all[_ngcontent-%COMP%]{display:flex;align-items:center}.mat-select-search-inner[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{flex-basis:auto}.mat-select-search-inner[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]:-ms-input-placeholder{-ms-user-select:text}  .mat-select-search-panel{transform:none!important;overflow-x:hidden}.mat-select-search-input[_ngcontent-%COMP%]{padding:16px 36px 16px 16px;box-sizing:border-box}.mat-select-search-no-entries-found[_ngcontent-%COMP%]{padding:16px}.mat-select-search-clear[_ngcontent-%COMP%]{position:absolute;right:4px;top:5px}.mat-select-search-spinner[_ngcontent-%COMP%]{position:absolute;right:16px;top:calc(50% - 8px)}.mat-select-search-inside-mat-option[_nghost-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;height:3em;line-height:3em}.mat-select-search-inside-mat-option[_nghost-%COMP%]   .mat-select-search-clear[_ngcontent-%COMP%]{top:3px}  .mat-option[aria-disabled=true].contains-mat-select-search{position:static;padding:0}  .mat-option[aria-disabled=true].contains-mat-select-search .mat-icon{margin-right:0}  .mat-option[aria-disabled=true].contains-mat-select-search .mat-option-pseudo-checkbox{display:none}  .mat-option[aria-disabled=true].contains-mat-select-search.mat-select-search-no-entries-found{height:6em}.mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%]{padding-left:16px;padding-bottom:2px}"],changeDetection:0}),t})(),Ge=(()=>{let t=class{};return t.\u0275mod=r.Tb({type:t}),t.\u0275inj=r.Sb({factory:function(e){return new(e||t)},imports:[[o.c,a.r,h.c,pe.b,P.b,l.c,de.a,ue.b]]}),t})();const ke=["singleSelect"];function Re(t,e){if(1&t&&(r.bc(0,"mat-option",17),r.Pc(1),r.ac()),2&t){const t=e.$implicit;r.sc("value",t),r.Gb(1),r.Qc(t.name)}}function Fe(t,e){if(1&t&&(r.bc(0,"mat-option",17),r.Pc(1),r.ac()),2&t){const t=e.$implicit;r.sc("value",t._id),r.Gb(1),r.Qc(t.name)}}function ze(t,e){1&t&&(r.bc(0,"p",18),r.Pc(1,"*Please fill all the fields"),r.ac())}let Ee=(()=>{class t{constructor(t,e,i,o,s){this.data=t,this.dialogRef=e,this.fb=i,this.loader=o,this.productApiService=s,this.subscripition=new w.a,this.products=[],this.attributes=[],this.productFilterCtrl=new a.d,this.bankCtrl=new a.d,this.filteredProducts=new Jt.a(1),this._onDestroy=new Zt.a}ngOnInit(){this.loader.open(),this.getProducts(),this.getAttributes(),this.buildItemForm(this.data.payload),this.productFilterCtrl.valueChanges.pipe(Object(te.a)(this._onDestroy)).subscribe(()=>{this.filterBanks()})}ngAfterViewInit(){this.setInitialValue()}setInitialValue(){this.filteredProducts.subscribe(t=>{this.singleSelect.compareWith=(t,e)=>t._id===e._id})}filterBanks(){if(!this.products)return;let t=this.productFilterCtrl.value;t?(t=t.toLowerCase(),this.filteredProducts.next(this.products.filter(e=>e.name.toLowerCase().indexOf(t)>-1))):this.filteredProducts.next(this.products.slice())}getProducts(){this.subscripition.add(this.productApiService.getAllProducts().subscribe(t=>{this.products=t.result,this.filteredProducts.next(this.products.slice()),this.loader.close()},t=>{this.loader.close()}))}getAttributes(){this.subscripition.add(this.productApiService.getAllAttribute().subscribe(t=>{this.attributes=t.result,this.loader.close()},t=>{this.loader.close()}))}buildItemForm(t){var e,i,o,s;this.itemForm=this.fb.group({item:[(null===(i=null===(e=t)||void 0===e?void 0:e.item)||void 0===i?void 0:i._id)||null,a.t.required],attribute:[(null===(s=null===(o=t)||void 0===o?void 0:o.attribute)||void 0===s?void 0:s._id)||null,a.t.required],value:[t.value||null,a.t.required],factor:[t.factor||null,a.t.required]})}submit(){this.itemForm.value.value=this.itemForm.value.value.trim(),this.itemForm.value.factor=this.itemForm.value.factor.trim(),this.itemForm.value.value.length>0&&this.itemForm.value.factor.length>0?this.dialogRef.close(this.itemForm.value):this.validationErrors=!0}ngOnDestroy(){this.loader.close(),this.subscripition.unsubscribe(),this._onDestroy.next(),this._onDestroy.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.a),r.Vb(c.f),r.Vb(a.c),r.Vb(m.a),r.Vb(tt))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-specifications-popup"]],viewQuery:function(t,e){var i;1&t&&r.Lc(ke,!0),2&t&&r.Bc(i=r.kc())&&(e.singleSelect=i.first)},decls:30,vars:12,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","50",1,"pr-1"],[1,"full-width","p-b-10"],["placeholder","Select Product","name","item","formControlName","item",1,"full-width","state-box"],["singleSelect",""],["placeholderLabel","Find bank...","placeholderLabel","Find product","noEntriesFoundLabel","'No matching product found'",3,"formControl"],["ngDefaultControl","",3,"value",4,"ngFor","ngForOf"],["placeholder","Select Attribute","name","attributes","formControlName","attribute",1,"full-width","state-box"],["matInput","","name","value","formControlName","value","placeholder","Value"],["matInput","","name","factor","formControlName","factor","placeholder","Factor"],["class","error-msg",4,"ngIf"],["fxFlex","100",1,"mt-1"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],["ngDefaultControl","",3,"value"],[1,"error-msg"]],template:function(t,e){1&t&&(r.bc(0,"h1",0),r.Pc(1),r.ac(),r.bc(2,"form",1),r.jc("ngSubmit",(function(t){return e.submit()})),r.bc(3,"div",2),r.bc(4,"div",3),r.bc(5,"mat-form-field",4),r.bc(6,"mat-select",5,6),r.bc(8,"mat-option"),r.Wb(9,"ngx-mat-select-search",7),r.ac(),r.Nc(10,Re,2,2,"mat-option",8),r.oc(11,"async"),r.ac(),r.ac(),r.ac(),r.bc(12,"div",3),r.bc(13,"mat-form-field",4),r.bc(14,"mat-select",9),r.Nc(15,Fe,2,2,"mat-option",8),r.ac(),r.ac(),r.ac(),r.bc(16,"div",3),r.bc(17,"mat-form-field",4),r.Wb(18,"input",10),r.ac(),r.ac(),r.bc(19,"div",3),r.bc(20,"mat-form-field",4),r.Wb(21,"input",11),r.ac(),r.ac(),r.Nc(22,ze,2,0,"p",12),r.bc(23,"div",13),r.bc(24,"button",14),r.Pc(25),r.oc(26,"translate"),r.ac(),r.Wb(27,"span",15),r.bc(28,"button",16),r.jc("click",(function(t){return e.dialogRef.close(!1)})),r.Pc(29,"Cancel"),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(1),r.Qc(e.data.title),r.Gb(1),r.sc("formGroup",e.itemForm),r.Gb(7),r.sc("formControl",e.productFilterCtrl),r.Gb(1),r.sc("ngForOf",r.pc(11,8,e.filteredProducts)),r.Gb(5),r.sc("ngForOf",e.attributes),r.Gb(7),r.sc("ngIf",e.validationErrors),r.Gb(2),r.sc("disabled",e.itemForm.invalid),r.Gb(1),r.Qc(r.pc(26,10,"SAVE")))},directives:[c.g,a.u,a.o,a.h,n.b,k.a,a.n,a.f,R.p,Oe,a.e,o.k,l.b,a.b,o.l,h.b],pipes:[o.b,p.c],styles:[".error-msg[_ngcontent-%COMP%]{color:red}"]}),t})();function Ue(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:null==t.item?null:t.item.name," ")}}function De(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:null==t.attribute?null:t.attribute.name," ")}}function Ve(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.value," ")}}function Te(t,e){if(1&t&&r.Pc(0),2&t){const t=e.row;r.Rc(" ",null==t?null:t.factor," ")}}function We(t,e){if(1&t){const t=r.cc();r.bc(0,"mat-slide-toggle",11),r.jc("change",(function(i){r.Gc(t);const o=e.row;return r.nc().statusChange(o,i)})),r.ac()}if(2&t){const t=e.row;r.sc("checked","active"===(null==t?null:t.status))}}function je(t,e){if(1&t){const t=r.cc();r.bc(0,"button",12),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().openPopUp(o)})),r.bc(1,"mat-icon"),r.Pc(2,"edit"),r.ac(),r.ac(),r.bc(3,"button",13),r.jc("click",(function(i){r.Gc(t);const o=e.row;return r.nc().deleteItem(o)})),r.bc(4,"mat-icon"),r.Pc(5,"delete"),r.ac(),r.ac()}}let He=(()=>{class t{constructor(t,e,i,o,s){this.dialog=t,this.snack=e,this.loader=i,this.confirmService=o,this.productApiService=s,this.specifications=[],this.subscripition=new w.a}ngOnInit(){this.getAllSpecifications()}getAllSpecifications(){this.subscripition.add(this.productApiService.getAllSpecification().subscribe(t=>{this.specifications=[...t.result],this.loader.close()},t=>{this.loader.close()}))}closeLoader(){this.loader.close()}openPopUp(t={},e){this.dialog.open(Ee,{width:"520px",disableClose:!0,data:{title:e?"Add Specification":"Update Specification",payload:t}}).afterClosed().subscribe(i=>{i&&(this.loader.open(),this.subscripition.add(e?this.productApiService.addSpecification(i).subscribe(t=>{this.loader.close(),"success"===t.status&&(this.getSpecifications(t.result._id,"add"),this.snack.open("Specification Added!","OK",{duration:4e3}))},t=>{this.loader.close()}):this.productApiService.updateSpecification(t._id,i).subscribe(t=>{this.loader.close(),"success"===t.status&&(this.getSpecifications(t.result._id,"update"),this.snack.open("Specification Updated!","OK",{duration:4e3}))},t=>{this.loader.close()})))})}getSpecifications(t,e){this.subscripition.add(this.productApiService.getSpecification(t).subscribe(t=>{"add"===e?(this.specifications.push(t.result),this.specifications=[...this.specifications]):this.specifications.forEach((e,i)=>{e._id===t.result._id&&(this.specifications[i]=t.result,this.specifications=[...this.specifications])})},t=>{this.loader.close()}))}deleteItem(t){this.subscripition.add(this.confirmService.confirm({message:`Delete ${t.name}?`}).subscribe(e=>{e&&(this.loader.open(),this.specifications.forEach((e,i)=>{e._id===t._id&&this.specifications.splice(i,1)}),this.specifications=[...this.specifications],this.productApiService.deleteSpecification(t._id).subscribe(t=>{this.loader.close(),"success"===t.status&&this.snack.open("Specification deleted!","OK",{duration:4e3})}))},t=>{this.loader.close()}))}statusChange(t,e){this.loader.open(),this.subscripition.add(this.productApiService.updateSpecification(t._id,{status:e.checked?"active":"inactive"}).subscribe(e=>{this.loader.close(),"success"===e.status&&(this.getSpecifications(t._id,"update"),this.snack.open("Status Updated!","OK",{duration:4e3}))},t=>{this.loader.close()}))}ngOnDestroy(){this.subscripition.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(c.b),r.Vb(S.a),r.Vb(m.a),r.Vb(x.a),r.Vb(tt))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-specifications"]],decls:20,vars:19,consts:[[1,"m-333"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","limit","rowHeight"],["name","Product",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","Attribute",3,"flexGrow"],["name","Value",3,"flexGrow"],["name","Factor",3,"flexGrow"],["name","Active",3,"flexGrow"],["name","Actions",3,"flexGrow"],[3,"checked","change"],["mat-icon-button","","mat-sm-button","","color","primary",1,"mr-1",3,"click"],["mat-icon-button","","mat-sm-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(r.bc(0,"div",0),r.bc(1,"button",1),r.jc("click",(function(t){return e.openPopUp({},!0)})),r.Pc(2),r.oc(3,"translate"),r.oc(4,"translate"),r.ac(),r.ac(),r.bc(5,"mat-card",2),r.bc(6,"mat-card-content",2),r.bc(7,"ngx-datatable",3),r.bc(8,"ngx-datatable-column",4),r.Nc(9,Ue,1,1,"ng-template",5),r.ac(),r.bc(10,"ngx-datatable-column",6),r.Nc(11,De,1,1,"ng-template",5),r.ac(),r.bc(12,"ngx-datatable-column",7),r.Nc(13,Ve,1,1,"ng-template",5),r.ac(),r.bc(14,"ngx-datatable-column",8),r.Nc(15,Te,1,1,"ng-template",5),r.ac(),r.bc(16,"ngx-datatable-column",9),r.Nc(17,We,1,1,"ng-template",5),r.ac(),r.bc(18,"ngx-datatable-column",10),r.Nc(19,je,6,0,"ng-template",5),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Gb(2),r.Sc(" ",r.pc(3,15,"ADD")," ",r.pc(4,17,"Specification")," "),r.Gb(5),r.sc("rows",e.specifications)("columnMode","force")("headerHeight",50)("footerHeight",50)("scrollbarH",!0)("limit",10)("rowHeight",50),r.Gb(1),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1),r.Gb(2),r.sc("flexGrow",1))},directives:[h.b,y.a,y.b,C.d,C.b,C.a,A.a,P.a],pipes:[p.c],styles:[""]}),t})();const Ne=[{path:"",component:Z,children:[{path:"",redirectTo:"state"},{path:"state",component:G},{path:"district",component:j},{path:"region",component:$},{path:"category",component:It},{path:"products",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Pb({type:t,selectors:[["app-products"]],decls:7,vars:0,consts:[["headerPosition","primary","color","primary","backgroundColor",""],["label","Item"],["label","Attribute"],["label","Specification"]],template:function(t,e){1&t&&(r.bc(0,"mat-tab-group",0),r.bc(1,"mat-tab",1),r.Wb(2,"app-product"),r.ac(),r.bc(3,"mat-tab",2),r.Wb(4,"app-attributes"),r.ac(),r.bc(5,"mat-tab",3),r.Wb(6,"app-specifications"),r.ac(),r.ac())},directives:[Mt.b,Mt.a,Nt,$t,He],styles:[""]}),t})()},{path:"**",redirectTo:""}]}];let Le=(()=>{class t{}return t.\u0275mod=r.Tb({type:t}),t.\u0275inj=r.Sb({factory:function(e){return new(e||t)},imports:[[s.k.forChild(Ne)],s.k]}),t})();var Be=i("zMWy"),Qe=i("PCNd");i.d(e,"DashboardModule",(function(){return Ke}));let Ke=(()=>{class t{}return t.\u0275mod=r.Tb({type:t}),t.\u0275inj=r.Sb({factory:function(e){return new(e||t)},imports:[[o.c,Le,Qe.a,Be.a,p.b,C.e,lt,Ge]]}),t})()}}]);